LavaPack.loadBundle([[7379,{"../../app/scripts/lib/util":174,"../../shared/constants/app":5651,"../../shared/constants/bridge":5652,"../../shared/constants/hardware-wallets":5658,"../../shared/constants/keyring":5659,"../../shared/constants/labels":5660,"../../shared/constants/multichain/assets":5664,"../../shared/constants/network":5666,"../../shared/constants/swaps":5677,"../../shared/constants/terms":5678,"../../shared/constants/time":5679,"../../shared/constants/tokens":5680,"../../shared/constants/transaction":5681,"../../shared/modules/conversion.utils":5717,"../../shared/modules/hexstring-utils":5723,"../../shared/modules/selectors/networks":5734,"../../shared/modules/selectors/util":5736,"../../shared/modules/string-utils":5737,"../../shared/modules/transaction.utils":5739,"../../shared/notifications":5740,"../../shared/types/bridge":5742,"../ducks/app/app":6661,"../ducks/metamask/metamask":6676,"../helpers/constants/design-system":6688,"../helpers/utils/snaps":6732,"../helpers/utils/util":6737,"../pages/confirmations/confirmation/templates":7063,"./accounts":7361,"./multichain":7373,"./permissions":7377,"./remote-feature-flags":7378,"./transactions":7384,"@metamask/controller-utils":1509,"@metamask/keyring-api":1906,"@metamask/name-controller":2067,"@metamask/network-controller":2079,"@metamask/permission-controller":2169,"@metamask/snaps-rpc-methods":2587,"@metamask/snaps-utils":2774,"@metamask/transaction-controller":2826,lodash:4787,"punycode/punycode.js":5003,reselect:5216,semver:5479},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.accountSupportsSmartTx=function(e){const t=$(e);return Boolean("snap"!==t)},n.accountsWithSendEtherInfoSelector=pe,n.checkIfMethodIsEnabled=function(e,t){const n=(0,j.getSelectedInternalAccount)(e);return Boolean(n.methods.includes(t))},n.checkNetworkAndAccountSupports1559=function(e,t){return(0,D.isEIP1559Network)(e,t)},n.checkNetworkOrAccountNotSupports1559=function(e){return(0,D.isNotEIP1559Network)(e)},n.doesAddressRequireLedgerHidConnection=function(e,t){const n=(0,D.isAddressLedger)(e,t),a=(0,D.getLedgerTransportType)(e)===p.LedgerTransportTypes.webhid,r=(0,M.getLedgerWebHidConnectedStatus)(e)!==p.WebHIDConnectedStatuses.connected,o=(0,M.getLedgerTransportStatus)(e)!==p.HardwareTransportStates.verified;return n&&a&&(r||o)},n.getAccountName=function(e,t){const n=e.find((e=>(0,P.isEqualCaseInsensitive)(e.address,t)));return n&&""!==n.metadata.name?n.metadata.name:""},n.getAccountType=$,n.getAccountTypeForKeyring=X,n.getAccountsWithLabels=function(e){return Te(e).map((e=>{const{address:t,metadata:{name:n},balance:a}=e;return{...e,addressLabel:`${n.length<N.TRUNCATED_NAME_CHAR_LIMIT?n:`${n.slice(0,N.TRUNCATED_NAME_CHAR_LIMIT-1)}...`} (${(0,O.shortenAddress)(t)})`,label:n,balance:a}}))},n.getAddressBook=_e,n.getAddressBookEntry=Ae,n.getAddressBookEntryOrAccountName=function(e,t){const n=Ae(e,t);if(n&&""!==n.name)return n.name;const a=Object.values((0,j.getInternalAccounts)(e)).find((e=>(0,P.isEqualCaseInsensitive)(e.address,t)));return(null==a?void 0:a.metadata.name)||t},n.getAdvancedGasFeeValues=function(e){return e.metamask.advancedGasFee[(0,m.getCurrentChainId)(e)]},n.getAdvancedInlineGasShown=function(e){return Boolean(e.metamask.featureFlags.advancedInlineGas)},n.getAllAccountsOnNetworkAreEmpty=function(e){const t=se(e)??{},n=Object.values(t).every((e=>"0x0"===e||"0x00"===e)),a=0===ae(e);return n&&a},n.getAllConnectedAccounts=n.getAllChainsToPoll=void 0,n.getAllDetectedTokens=function(e){return e.metamask.allDetectedTokens},n.getAllDetectedTokensForSelectedAddress=function(e){if(!(0,D.getCompletedOnboarding)(e))return{};const{address:t}=(0,j.getSelectedInternalAccount)(e);return Object.entries(e.metamask.allDetectedTokens||{}).reduce(((e,[n,a])=>{const r=a[t];return r&&(e[n]=r.map((e=>({...e,chainId:n})))),e}),{})},n.getAllDomains=Se,n.getAllSnapAvailableUpdates=n.getAllEnabledNetworks=void 0,n.getAllTokens=Ee,n.getAnySnapUpdateAvailable=void 0,n.getAppIsLoading=function(e){return e.appState.isLoading},n.getBlockExplorerLinkText=function(e,t=!1){const n=pt(e),a=je(e);let r={firstPart:"addBlockExplorer",secondPart:""};a.blockExplorerUrl?r=t?{firstPart:"blockExplorerView",secondPart:(0,O.getURLHostName)(a.blockExplorerUrl)}:{firstPart:"viewinExplorer",secondPart:"blockExplorerAccountAction"}:!1===n&&(r=t?{firstPart:"etherscanViewOn",secondPart:""}:{firstPart:"viewOnEtherscan",secondPart:"blockExplorerAccountAction"});return r},n.getConnectedSnapsList=n.getConnectedSitesListWithNetworkInfo=n.getConnectedSitesList=n.getConfirmationExchangeRates=n.getChainIdsToPoll=void 0,n.getCrossChainMetaMaskCachedBalances=function(e){const t=e.metamask.accountsByChainId;return Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]).reduce(((e,a)=>(e[a]=t[n][a].balance,e)),{}),e)),{})},n.getCrossChainTokenExchangeRates=void 0,n.getCurrencyRates=Qe,n.getCurrentAccountWithSendEtherInfo=fe,n.getCurrentEthBalance=Ne,n.getCurrentKeyring=Q,n.getCurrentNetwork=void 0,n.getCurrentQRHardwareState=function(e){const{qrHardware:t}=e.metamask;return t||{}},n.getCustomNonceValue=function(e){return String(e.appState.customNonceValue)},n.getCustomTokenAmount=function(e){return e.appState.customTokenAmount},n.getDefaultHomeActiveTabName=function(e){return e.metamask.defaultHomeActiveTabName},n.getDetectedTokensInCurrentNetwork=function(e){var t;const n=(0,m.getCurrentChainId)(e),{address:a}=(0,j.getSelectedInternalAccount)(e);return null===(t=e.metamask.allDetectedTokens)||void 0===t||null===(t=t[n])||void 0===t?void 0:t[a]},n.getEditedNetwork=function(e){return e.appState.editedNetwork},n.getEnabledSnaps=void 0,n.getEnsResolutionByAddress=function(e,t){if(e.metamask.ensResolutionsByAddress[t]){const n=e.metamask.ensResolutionsByAddress[t];return(0,r.toUnicode)(n)}const n=Ae(e,t)||J(e,t);return(null==n?void 0:n.name)||""},n.getEthereumAddressNames=function(e){var t;return(null===(t=e.metamask.names)||void 0===t?void 0:t[l.NameType.ETHEREUM_ADDRESS])||{}},n.getEvmInternalAccounts=void 0,n.getExternalServicesOnboardingToggleState=function(e){return e.appState.externalServicesOnboardingToggleState},n.getFeatureFlags=function(e){return e.metamask.featureFlags},n.getFeatureNotificationsEnabled=function(e){const{featureNotificationsEnabled:t=!1}=Re(e);return t},n.getFullTxData=void 0,n.getHardwareWalletType=function(e){const t=Q(e);return z(e)?t.type:undefined},n.getHiddenAccountsList=gt,n.getInterfaceContent=n.getInterface=n.getInsightSnaps=n.getInsightSnapIds=n.getHideSnapBranding=void 0,n.getInternalAccount=function(e,t){return e.metamask.internalAccounts.accounts[t]},n.getInternalAccountByAddress=J,n.getInternalAccountsSortedByKeyring=void 0,n.getIpfsGateway=function(e){return e.metamask.ipfsGateway},n.getIsAddSnapAccountEnabled=function(e){return e.metamask.addSnapAccountEnabled},n.getIsAddingNewNetwork=function(e){return e.appState.isAddingNewNetwork},n.getIsBitcoinSupportEnabled=function(e){const{bitcoinSupportEnabled:t}=e.metamask;return Boolean(t)},n.getIsBitcoinTestnetSupportEnabled=function(e){const{bitcoinTestnetSupportEnabled:t}=e.metamask;return Boolean(t)},n.getIsBridgeChain=function(e,t){const n=(0,m.getCurrentChainId)(e),a=t??n;return k.ALLOWED_BRIDGE_CHAIN_IDS.includes(a)},n.getIsBridgeEnabled=void 0,n.getIsCustomNetwork=pt,n.getIsDynamicTokenListAvailable=_t,n.getIsLineaMainnet=function(e){return(0,m.getCurrentChainId)(e)===A.CHAIN_IDS.LINEA_MAINNET},n.getIsMainnet=ye,n.getIsMultiRpcOnboarding=function(e){return e.appState.isMultiRpcOnboarding},n.getIsNonStandardEthChain=function(e){return!(ye(e)||Ce(e))},n.getIsSecurityAlertsEnabled=function(e){return e.metamask.securityAlertsEnabled},n.getIsSigningQRHardwareTransaction=function(e){var t;return(null===(t=e.metamask.qrHardware)||void 0===t||null===(t=t.sign)||void 0===t?void 0:t.request)!==undefined},n.getIsSolanaSupportEnabled=function(e){const{addSolanaAccount:t}=(0,Y.getRemoteFeatureFlags)(e);return Boolean(t)},n.getIsSwapsChain=function(e,t){const n=(0,m.getCurrentChainId)(e),a=t??n;return I.ALLOWED_PROD_SWAPS_CHAIN_IDS.includes(a)},n.getIsTestnet=Ce,n.getIsTokenDetectionInactiveOnMainnet=At,n.getIsTokenDetectionSupported=function(e){const t=mt(e),n=_t(e);return t&&n},n.getIsTokenNetworkFilterEqualCurrentNetwork=Pe,n.getIsWatchEthereumAccountEnabled=function(e){return e.metamask.watchEthereumAccountEnabled},n.getIstokenDetectionInactiveOnNonMainnetSupportedNetwork=function(e){const t=mt(e),n=ye(e);return _t(e)&&!t&&!n},n.getKeyringSnapAccounts=function(e){const t=(0,j.getInternalAccounts)(e);return Object.values(t).filter((e=>{const{keyring:t}=e.metadata;return t.type===f.KeyringType.snap}))},n.getKeyringSnapRemovalResult=function(e){return e.appState.keyringRemovalSnapModal},n.getKnownMethodData=function(e,t){const{knownMethodData:n,use4ByteResolution:a}=e.metamask;if(!a||!(0,q.hasTransactionData)(t))return null;const r=(0,_.addHexPrefix)(t).slice(0,10);if(r.length<10)return null;return(null==n?void 0:n[r])??null},n.getLastViewedUserSurvey=function(e){return e.metamask.lastViewedUserSurvey},n.getLocale=ot,n.getMarketData=void 0,n.getMaybeSelectedInternalAccount=function(e){var t,n;const a=null===(t=e.metamask.internalAccounts)||void 0===t?void 0:t.selectedAccount;return a?null===(n=e.metamask.internalAccounts)||void 0===n?void 0:n.accounts[a]:undefined},n.getMemoizedTargetSubjectMetadata=n.getMemoizedMetadataContract=n.getMemoizedMetaMaskInternalAccounts=n.getMemoizedInterfaces=n.getMemoizedInterfaceContent=n.getMemoizedInterface=n.getMemoizedCurrentChainId=void 0,n.getMemoizedUnapprovedTemplatedConfirmations=n.getMemoizedUnapprovedConfirmations=void 0,n.getMetaMaskAccountBalances=oe,n.getMetaMaskAccountsOrdered=n.getMetaMaskAccountsConnected=n.getMetaMaskAccounts=void 0,n.getMetaMaskCachedBalances=se,n.getMetaMaskKeyrings=re,n.getMetaMetricsDataDeletionId=function(e){return e.metamask.metaMetricsDataDeletionId},n.getMetaMetricsDataDeletionStatus=function(e){return e.metamask.metaMetricsDataDeletionStatus},n.getMetaMetricsDataDeletionTimestamp=function(e){return e.metamask.metaMetricsDataDeletionTimestamp},n.getMetaMetricsId=function(e){const{metaMetricsId:t}=e.metamask;return t},n.getNameLookupSnapsIds=n.getMultipleTargetsSubjectMetadata=n.getMetadataContractName=void 0,n.getNameSources=function(e){return e.metamask.nameSources||{}},n.getNames=function(e){return e.metamask.names||{}},n.getNativeCurrencyForChain=ze,n.getNativeCurrencyImage=function(e){const t=(0,m.getCurrentChainId)(e);return A.CHAIN_ID_TOKEN_IMAGE_MAP[t]},n.getNativeTokenCachedBalanceByChainIdByAccountAddress=ue,n.getNetworkConfigurationIdByChainId=n.getNetworkClientIdsToPoll=n.getNativeTokenCachedBalanceByChainIdSelector=void 0,n.getNetworkIdentifier=function(e){const{type:t,nickname:n,rpcUrl:a}=(0,m.getProviderConfig)(e);return n||a||t},n.getNetworkToAutomaticallySwitchTo=function(e){const t=Et(e),n=Ve(e);if((0,_.getEnvironmentType)()===L.ENVIRONMENT_TYPE_POPUP&&(0,D.getIsUnlocked)(e)&&n&&0===t){const t=Se(e)[n],a=St(e);if(t&&a.id!==t)return t}return null},n.getNetworksTabSelectedNetworkConfigurationId=function(e){return e.appState.selectedNetworkConfigurationId},n.getNewNetworkAdded=function(e){return e.appState.newNetworkAddedName},n.getNewNftAddedMessage=function(e){return e.appState.newNftAddedMessage},n.getNewTokensImported=function(e){return e.appState.newTokensImported},n.getNewTokensImportedError=function(e){return e.appState.newTokensImportedError},n.getNextSuggestedNonce=function(e){return Number(e.appState.nextNonce)},n.getNftIsStillFetchingIndication=function(e){return e.appState.isNftStillFetchingIndication},n.getNotifySnaps=void 0,n.getNumberOfAllUnapprovedTransactionsAndMessages=Et,n.getNumberOfTokens=ae,n.getOnboardedInThisUISession=function(e){return e.appState.onboardedInThisUISession},n.getOnboardingDate=function(e){return e.metamask.onboardingDate},n.getOpenSeaEnabled=function(e){return Boolean(e.metamask.openSeaEnabled)},n.getOrderedNetworksList=function(e){return e.metamask.orderedNetworkList},n.getOriginOfCurrentTab=Ve,n.getPendingTokens=void 0,n.getPetnamesEnabled=function(e){const{petnamesEnabled:t=!0}=Re(e);return t},n.getPinnedAccountsList=Tt,n.getPreferences=Re,n.getPreinstalledSnaps=void 0,n.getQueuedRequestCount=he,n.getRemoveNftMessage=function(e){return e.appState.removeNftMessage},n.getRequestingNetworkInfo=function(e,t){let n=t===undefined?[]:t;"string"==typeof n&&(n=[n]);const a=n.flat();return Object.values((0,m.getNetworkConfigurationsByChainId)(e)).filter((e=>a.includes(e.chainId)))},n.getRpcPrefsForCurrentProvider=je,n.getSelectedAccount=void 0,n.getSelectedAccountCachedBalance=ge,n.getSelectedAccountNativeTokenCachedBalanceByChainId=ie,n.getSelectedAccountNativeTokenCachedBalanceByChainIdDeepEq=void 0,n.getSelectedAccountTokensAcrossChains=ce,n.getSelectedAccountTokensAcrossChainsDeepEq=void 0,n.getSelectedAddress=function(e){var t;return null===(t=(0,j.getSelectedInternalAccount)(e))||void 0===t?void 0:t.address},n.getSelectedEvmInternalAccount=void 0,n.getSelectedInternalAccountWithBalance=function(e){const t=(0,j.getSelectedInternalAccount)(e),n=oe(e)[t.address];return{...t,balance:n?n.balance:"0x0"}},n.getSelectedNetwork=void 0,n.getSendInputCurrencySwitched=function({appState:e}){return e.sendInputCurrencySwitched},n.getSettingsPageSnapsIds=n.getSettingsPageSnaps=void 0,n.getShouldHideZeroBalanceTokens=function(e){const{hideZeroBalanceTokens:t}=Re(e);return t},n.getShouldShowAggregatedBalancePopover=function(e){const{shouldShowAggregatedBalancePopover:t}=Re(e);return t},n.getShouldShowFiat=function(e){const t=(0,m.getCurrentChainId)(e),n=A.TEST_NETWORK_IDS.includes(t),{showFiatInTestnets:a}=Re(e),r=(0,D.getConversionRate)(e),o=ft(e),s=Boolean(o&&r);if(n)return a&&s;return s},n.getShouldShowSeedPhraseReminder=function(e){const{tokens:t,seedPhraseBackedUp:n,dismissSeedBackUpReminder:a}=e.metamask,r=(0,j.getSelectedInternalAccount)(e)?Ne(e):0;return!1===n&&(parseInt(r,16)>0||t.length>0)&&!1===a},n.getShowAccountBanner=function(e){return e.metamask.showAccountBanner},n.getShowBasicFunctionalityModal=function(e){return e.appState.showBasicFunctionalityModal},n.getShowBetaHeader=function(e){return e.metamask.showBetaHeader},n.getShowDataDeletionErrorModal=function(e){return e.appState.showDataDeletionErrorModal},n.getShowDeleteMetaMetricsDataModal=function(e){return e.appState.showDeleteMetaMetricsDataModal},n.getShowExtensionInFullSizeView=function(e){const{showExtensionInFullSizeView:t}=Re(e);return Boolean(t)},n.getShowFiatInTestnets=function(e){const{showFiatInTestnets:t}=Re(e);return t},n.getShowNetworkBanner=function(e){return e.metamask.showNetworkBanner},n.getShowOutdatedBrowserWarning=function(e){const{outdatedBrowserWarningLastShown:t}=e.metamask;if(!t)return!0;return(new Date).getTime()-t>=2*C.DAY},n.getShowPermissionsTour=function(e){return e.metamask.showPermissionsTour},n.getShowPermittedNetworkToastOpen=function(e){return e.appState.showPermittedNetworkToastOpen},n.getShowRecoveryPhraseReminder=function(e){const{recoveryPhraseReminderLastShown:t,recoveryPhraseReminderHasBeenShown:n}=e.metamask,a=(new Date).getTime(),r=n?90*C.DAY:2*C.DAY;return a-t>=r},n.getShowTermsOfUse=function(e){const{termsOfUseLastAgreed:t}=e.metamask;if(!t)return!0;return new Date(t).getTime()<new Date(R.TERMS_OF_USE_LAST_UPDATED).getTime()},n.getShowTestNetworks=De,n.getShowWhatsNewPopup=function(e){return e.appState.showWhatsNewPopup},n.getSignatureInsightSnaps=n.getSignatureInsightSnapIds=void 0,n.getSlides=function(e){return e.metamask.slides||[]},n.getSnapMetadata=n.getSnapLatestVersion=n.getSnapInsights=n.getSnap=void 0,n.getSnapRegistry=function(e){const{snapRegistryList:t}=e.metamask;return t},n.getSnapRegistryData=void 0,n.getSnaps=rt,n.getSnapsInstallPrivacyWarningShown=function(e){const{snapsInstallPrivacyWarningShown:t}=e.metamask;if(t===undefined||null===t)return!1;return t},n.getSnapsList=Nt,n.getSnapsMetadata=void 0,n.getSortedAnnouncementsToShow=function(e){const t=Object.values(e.metamask.announcements),n=function(e){const t=Q(e),n=(null==t?void 0:t.type)===f.KeyringType.ledger,a=window.navigator.userAgent.includes("Firefox");return{[B.NOTIFICATION_DROP_LEDGER_FIREFOX]:n&&a}}(e),a=t.filter((e=>!e.isShown&&n[e.id]));return a.sort(((e,t)=>new Date(t.date)-new Date(e.date)))},n.getSuggestedNfts=function(e){var t;return(null===(t=Oe(e))||void 0===t?void 0:t.filter((({requestData:e,type:t})=>{var n;return t===s.ApprovalType.WatchAsset&&(null==e||null===(n=e.asset)||void 0===n?void 0:n.tokenId)!==undefined})))||[]},n.getSuggestedTokens=function(e){var t;return(null===(t=Oe(e))||void 0===t?void 0:t.filter((({type:e,requestData:t})=>{var n;return e===s.ApprovalType.WatchAsset&&(null==t||null===(n=t.asset)||void 0===n?void 0:n.tokenId)===undefined})))||[]},n.getSwapsDefaultToken=function(e,t=null){const n=me(e),a=null==n?void 0:n.balance,r=(0,m.getCurrentChainId)(e),o=t??r;return{...I.SWAPS_CHAINID_DEFAULT_TOKEN_MAP[o],balance:(0,b.hexToDecimal)(a),string:(0,b.getValueFromWeiHex)({value:a,numberOfDecimals:4,toDenomination:"ETH"})}},n.getSwitchedNetworkDetails=function(e){const{switchedNetworkDetails:t}=e.metamask,n=(0,m.getNetworkConfigurationsByChainId)(e);if(t){const e=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t.networkClientId))));return{nickname:null==e?void 0:e.name,imageUrl:A.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==e?void 0:e.chainId],origin:null==t?void 0:t.origin}}return null},n.getTargetAccount=function(e,t){return Z(e)[t]},n.getTargetAccountWithSendEtherInfo=function(e,t){const n=pe(e);return(0,O.getAccountByAddress)(n,t)},n.getTargetSubjectMetadata=ve,n.getTestNetworkBackgroundColor=function(e){const t=(0,m.getProviderConfig)(e).ticker;switch(!0){case null==t?void 0:t.includes(A.GOERLI_DISPLAY_NAME):return v.BackgroundColor.goerli;case null==t?void 0:t.includes(A.SEPOLIA_DISPLAY_NAME):return v.BackgroundColor.sepolia;default:return undefined}},n.getTheme=function(e){return e.metamask.theme},n.getTokenNetworkFilter=n.getTokenList=n.getTokenExchangeRates=n.getTokenDetectionSupportNetworkByChainId=void 0,n.getTokensAcrossChainsByAccountAddress=de,n.getTokensMarketData=n.getTokensAcrossChainsByAccountAddressSelector=void 0,n.getTotalUnapprovedCount=function(e){return e.metamask.pendingApprovalCount??0},n.getTxData=n.getTransaction=void 0,n.getUSDConversionRate=function(e){var t;return null===(t=e.metamask.currencyRates[(0,m.getProviderConfig)(e).ticker])||void 0===t?void 0:t.usdConversionRate},n.getUnapprovedConfirmations=n.getUSDConversionRateByChainId=void 0,n.getUnapprovedTemplatedConfirmations=we,n.getUnapprovedTransaction=void 0,n.getUnapprovedTxCount=function(e){const t=(0,K.getUnapprovedTransactions)(e);return Object.keys(t).length},n.getUnconnectedAccounts=function(e,t){const n=Te(e),a=(0,x.getOrderedConnectedAccountsForConnectedDapp)(e,t);return n.filter((e=>!a.some((t=>t.address===e.address))))},n.getUpdatedAndSortedAccounts=void 0,n.getUseBlockie=function(e){return Boolean(e.metamask.useBlockie)},n.getUseCurrencyRateCheck=ft,n.getUseExternalServices=Ye,n.getUseNftDetection=function(e){return Boolean(e.metamask.useNftDetection)},n.getUseTokenDetection=mt,n.getUseTransactionSimulations=function(e){return Boolean(e.metamask.useTransactionSimulations)},n.getWatchedToken=void 0,n.getWeb3ShimUsageStateForOrigin=function(e,t){return e.metamask.web3ShimUsageOrigins[t]},n.getsnapsAddSnapAccountModalDismissed=function(e){const{snapsAddSnapAccountModalDismissed:t}=e.metamask;return t},n.isBalanceCached=function(e){var t;const{address:n}=(0,j.getSelectedInternalAccount)(e),a=null===(t=oe(e)[n])||void 0===t?void 0:t.balance,r=ge(e);return Boolean(!a&&r)},n.isCurrentProviderCustom=function(e){const t=(0,m.getProviderConfig)(e);return t.type===A.NETWORK_TYPES.RPC&&!Object.values(A.CHAIN_IDS).includes(t.chainId)},n.isHardwareWallet=z,n.useSafeChainsListValidationSelector=n.selectNftsByChainId=n.selectNetworkIdentifierByChainId=n.selectNetworkConfigurationByChainId=n.selectInstalledSnaps=n.selectERC20TokensByChain=n.selectERC20Tokens=n.selectDefaultRpcEndpointByChainId=n.selectConversionRateByChainId=n.selectAllTokensFlat=n.rawStateSelector=void 0;var a,r=e("punycode/punycode.js"),o=e("@metamask/permission-controller"),s=e("@metamask/controller-utils"),i=e("@metamask/snaps-utils"),c=e("lodash"),u=(a=e("semver"))&&a.__esModule?a:{default:a},d=e("reselect"),l=e("@metamask/name-controller"),T=e("@metamask/transaction-controller"),g=e("@metamask/keyring-api"),E=e("@metamask/network-controller"),S=e("@metamask/snaps-rpc-methods"),m=e("../../shared/modules/selectors/networks"),_=e("../../app/scripts/lib/util"),A=e("../../shared/constants/network"),p=e("../../shared/constants/hardware-wallets"),f=e("../../shared/constants/keyring"),N=e("../../shared/constants/labels"),I=e("../../shared/constants/swaps"),k=e("../../shared/constants/bridge"),h=e("../../shared/constants/transaction"),O=e("../helpers/utils/util"),w=e("../pages/confirmations/confirmation/templates"),y=e("../../shared/constants/tokens"),C=e("../../shared/constants/time"),R=e("../../shared/constants/terms"),D=e("../ducks/metamask/metamask"),M=e("../ducks/app/app"),P=e("../../shared/modules/string-utils"),b=e("../../shared/modules/conversion.utils"),v=e("../helpers/constants/design-system"),B=e("../../shared/notifications"),L=e("../../shared/constants/app"),U=e("../../shared/constants/multichain/assets"),W=e("../../shared/types/bridge"),q=e("../../shared/modules/transaction.utils"),H=e("../../shared/modules/hexstring-utils"),F=e("../../shared/modules/selectors/util"),G=e("../helpers/utils/snaps"),K=e("./transactions"),x=e("./permissions"),j=e("./accounts"),V=e("./multichain"),Y=e("./remote-feature-flags");n.getConfirmationExchangeRates=e=>e.appState.confirmationExchangeRates;function Q(e){const t=(0,j.getSelectedInternalAccount)(e);return t?t.metadata.keyring:null}function z(e){var t;const n=Q(e);return Boolean(null==n||null===(t=n.type)||void 0===t?void 0:t.includes("Hardware"))}function $(e){return X(Q(e))}function X(e){if(!e)return"";const{type:t}=e;switch(t){case f.KeyringType.trezor:case f.KeyringType.ledger:case f.KeyringType.lattice:case f.KeyringType.qr:return"hardware";case f.KeyringType.imported:return"imported";case f.KeyringType.snap:return"snap";default:return"default"}}n.getPendingTokens=e=>e.appState.pendingTokens;const Z=n.getMetaMaskAccounts=(0,d.createSelector)(j.getInternalAccounts,oe,se,V.getMultichainBalances,V.getMultichainNetworkProviders,((e,t,n,a,r)=>Object.values(e).reduce(((e,o)=>{let s=o;if((0,g.isEvmAccountType)(o.type))null!=t&&t[o.address]&&(s={...s,...t[o.address]});else{var i;const e=r.find((e=>e.isAddressCompatible(o.address)));s={...s,balance:(null==a||null===(i=a[o.id])||void 0===i||null===(i=i[U.MULTICHAIN_NETWORK_TO_ASSET_TYPES[e.chainId]])||void 0===i?void 0:i.amount)??"0"}}return null!==s.balance&&s.balance!==undefined||(s={...s,balance:(n&&n[o.address])??"0x0"}),{...e,[o.address]:s}}),{})));function J(e,t){return Object.values(e.metamask.internalAccounts.accounts).find((e=>(0,P.isEqualCaseInsensitive)(e.address,t)))}const ee=n.getEvmInternalAccounts=(0,d.createSelector)(j.getInternalAccounts,(e=>e.filter((e=>(0,g.isEvmAccountType)(e.type))))),te=n.getSelectedEvmInternalAccount=(0,d.createSelector)(ee,(e=>{const[t]=(0,O.sortSelectedInternalAccounts)(e);return t})),ne=n.getInternalAccountsSortedByKeyring=(0,d.createSelector)(re,Z,((e,t)=>e.map((({accounts:e})=>e)).flat().map((e=>t[e]))));function ae(e){const{tokens:t}=e.metamask;return t?t.length:0}function re(e){return e.metamask.keyrings.map(((t,n)=>{var a;return{...t,metadata:(null===(a=e.metamask.keyringsMetadata)||void 0===a?void 0:a[n])??{}}}))}function oe(e){return e.metamask.accounts}function se(e){var t;const n=(0,m.getCurrentChainId)(e);return null!==(t=e.metamask.accountsByChainId)&&void 0!==t&&t[n]?Object.entries(e.metamask.accountsByChainId[n]).reduce(((e,[t,n])=>(e[t]=n.balance,e)),{}):{}}function ie(e){const{accountsByChainId:t}=e.metamask,{address:n}=te(e),a={};for(const[e,r]of Object.entries(t||{}))r[n]&&(a[e]=r[n].balance);return a}n.getSelectedAccountNativeTokenCachedBalanceByChainIdDeepEq=(0,F.createDeepEqualSelector)((e=>e.metamask.accountsByChainId),j.getSelectedInternalAccount,((e,{address:t})=>{const n={};for(const[a,r]of Object.entries(e||{}))r[t]&&(n[a]=r[t].balance);return n}));function ce(e){const{allTokens:t}=e.metamask,n=te(e).address,a={},r=ie(e);return new Set([...Object.keys(t||{}),...Object.keys(r||{})]).forEach((o=>{var s;a[o]||(a[o]=[]),null!==(s=t[o])&&void 0!==s&&s[n]&&t[o][n].forEach((e=>{const t={...e,chainId:o,isNative:!1};a[o].push(t)}));const i=r[o];if(i){const t=le(e,o);a[o].push({...t,address:"",balance:i,chainId:o,isNative:!0})}})),a}n.getSelectedAccountTokensAcrossChainsDeepEq=(0,F.createDeepEqualSelector)(ce,(e=>e)),n.getNativeTokenCachedBalanceByChainIdSelector=(0,d.createSelector)((e=>e),((e,t)=>t),((e,t)=>ue(e,t))),n.getTokensAcrossChainsByAccountAddressSelector=(0,d.createSelector)((e=>e),((e,t)=>t),((e,t)=>de(e,t)));function ue(e,t){const{accountsByChainId:n}=e.metamask,a={};for(const[e,r]of Object.entries(n||{}))r[t]&&(a[e]=r[t].balance);return a}function de(e,t){const{allTokens:n}=e.metamask,a={},r=ue(e,t);return new Set([...Object.keys(n||{}),...Object.keys(r||{})]).forEach((o=>{var s;a[o]||(a[o]=[]),null!==(s=n[o])&&void 0!==s&&s[t]&&n[o][t].forEach((e=>{const t={...e,chainId:o,isNative:!1};a[o].push(t)}));const i=r[o];if(i){const t=le(e,o);a[o].push({...t,address:"",balance:i,chainId:o,isNative:!0,image:ze(o)})}})),a}function le(e,t){const{networkConfigurationsByChainId:n}=e.metamask,a=null==n?void 0:n[t];if(a){return{symbol:a.nativeCurrency||h.AssetType.native,decimals:18,name:a.name||"Native Token"}}const{provider:r}=e.metamask;if((null==r?void 0:r.chainId)===t){var o;return{symbol:r.ticker||h.AssetType.native,decimals:(null===(o=r.nativeCurrency)||void 0===o?void 0:o.decimals)||18,name:r.nickname||"Native Token"}}return{symbol:h.AssetType.native,decimals:18,name:"Native Token"}}const Te=n.getMetaMaskAccountsOrdered=(0,d.createSelector)(ne,Z,((e,t)=>e.map((e=>({...e,...t[e.address]})))));n.getMetaMaskAccountsConnected=(0,d.createSelector)(Te,(e=>e.map((({address:e})=>e.toLowerCase()))));function ge(e){const t=se(e),{address:n}=(0,j.getSelectedInternalAccount)(e);return null==t?void 0:t[n]}function Ee(e){return e.metamask.allTokens}n.selectAllTokensFlat=(0,d.createSelector)(Ee,(e=>Object.values(e).reduce(((e,t)=>{const n=Object.values(t);return e.concat(...n)}),[])));function Se(e){return e.metamask.domains}const me=n.getSelectedAccount=(0,F.createDeepEqualSelector)(Z,j.getSelectedInternalAccount,((e,t)=>t?{...t,...e[t.address]}:undefined));n.getWatchedToken=e=>(0,d.createSelector)([me,Ee],((t,n)=>{var a;const{chainId:r}=e;return null==n||null===(a=n[r])||void 0===a||null===(a=a[t.address])||void 0===a?void 0:a.find((t=>(0,H.toChecksumHexAddress)(t.address)===(0,H.toChecksumHexAddress)(e.txParams.to)))}));n.getTokenExchangeRates=e=>{var t;const n=(0,m.getCurrentChainId)(e),a=(null===(t=e.metamask.marketData)||void 0===t?void 0:t[n])??{};return Object.entries(a).reduce(((e,[t,n])=>(e[t]=(null==n?void 0:n.price)??null,e)),{})};n.getCrossChainTokenExchangeRates=e=>{const t=e.metamask.marketData??{};return Object.keys(t).reduce(((e,n)=>(e[n]=Object.keys(t[n]).reduce(((e,a)=>{var r;return e[a]=null===(r=t[n][a])||void 0===r?void 0:r.price,e}),{}),e)),{})};n.getTokensMarketData=e=>{var t;const n=(0,m.getCurrentChainId)(e);return null===(t=e.metamask.marketData)||void 0===t?void 0:t[n]};function _e(e){const t=(0,m.getCurrentChainId)(e);return e.metamask.addressBook[t]?Object.values(e.metamask.addressBook[t]):[]}function Ae(e,t){return _e(e).find((e=>(0,P.isEqualCaseInsensitive)(e.address,t)))}function pe(e){const t=Z(e),n=(0,j.getInternalAccounts)(e);return Object.values(n).map((e=>({...e,...t[e.address]})))}function fe(e){const{address:t}=(0,j.getSelectedInternalAccount)(e),n=pe(e);return(0,O.getAccountByAddress)(n,t)}function Ne(e){var t;return null===(t=fe(e))||void 0===t?void 0:t.balance}n.getMarketData=e=>e.metamask.marketData;n.getNetworkConfigurationIdByChainId=(0,F.createDeepEqualSelector)((e=>e.metamask.networkConfigurationsByChainId),(e=>Object.entries(e).reduce(((e,[t,n])=>{const a=n.rpcEndpoints[n.defaultRpcEndpointIndex];return e[t]=a.networkClientId,e}),{})));const Ie=n.selectNetworkConfigurationByChainId=(0,d.createSelector)(m.getNetworkConfigurationsByChainId,((e,t)=>t),((e,t)=>e[t])),ke=n.selectDefaultRpcEndpointByChainId=(0,d.createSelector)(Ie,(e=>{if(!e)return undefined;const{defaultRpcEndpointIndex:t,rpcEndpoints:n}=e;return n[t]}));n.selectConversionRateByChainId=(0,d.createSelector)(Ie,(e=>e),((e,t)=>{var n;if(!e)return undefined;const{nativeCurrency:a}=e;return null===(n=t.metamask.currencyRates[a])||void 0===n?void 0:n.conversionRate})),n.selectNftsByChainId=(0,d.createSelector)(j.getSelectedInternalAccount,(e=>e.metamask.allNfts),((e,t)=>t),((e,t,n)=>{var a;return(null==t||null===(a=t[e.address])||void 0===a?void 0:a[n])??[]})),n.selectNetworkIdentifierByChainId=(0,d.createSelector)(Ie,ke,((e,t)=>{const{name:n}=e??{},{url:a,networkClientId:r}=t??{};return n||a||r}));function he(e){return e.metamask.queuedRequestCount??0}const Oe=n.getUnapprovedConfirmations=(0,F.createDeepEqualSelector)((e=>e.metamask.pendingApprovals||{}),(e=>Object.values(e)));function we(e){return Oe(e).filter((e=>w.TEMPLATED_CONFIRMATION_APPROVAL_TYPES.includes(e.type)))}function ye(e){return(0,m.getCurrentChainId)(e)===A.CHAIN_IDS.MAINNET}function Ce(e){const t=(0,m.getCurrentChainId)(e);return A.TEST_CHAINS.includes(t)}function Re({metamask:e}){return e.preferences??{}}function De(e){const{showTestNetworks:t}=Re(e);return Boolean(t)}const Me=n.getTokenNetworkFilter=(0,F.createDeepEqualSelector)(m.getCurrentChainId,Re,((e,{tokenNetworkFilter:t})=>A.FEATURED_NETWORK_CHAIN_IDS.includes(e)?Object.entries(t||{}).reduce(((e,[t,n])=>(A.FEATURED_NETWORK_CHAIN_IDS.includes(t)&&(e[t]=n),e)),{}):{[e]:!0}));function Pe(e){const t=(0,m.getCurrentChainId)(e),n=Me(e);return 1===Object.keys(n).length&&Object.keys(n)[0]===t}const be=(0,c.memoize)((e=>`data:image/svg+xml;utf8,${encodeURIComponent(e)}`));function ve(e,t){const n=(0,x.getSubjectMetadata)(e)[t];if((null==n?void 0:n.subjectType)===o.SubjectType.Snap){const{svgIcon:e,...t}=n;return{...t,iconUrl:e?be(e):null}}return n}const Be=e=>e;n.rawStateSelector=Be;const Le=(e,t)=>t,Ue=e=>e.metamask.snaps;n.selectInstalledSnaps=Ue;const We=n.getSnapRegistryData=(0,d.createSelector)([e=>{var t;return null===(t=e.metamask.database)||void 0===t?void 0:t.verifiedSnaps},Le],((e,t)=>e?e[t]:null)),qe=n.getSnapLatestVersion=(0,d.createSelector)([We],(e=>e?Object.keys(e.versions).reduce(((e,t)=>u.default.gt(t,e)?t:e),"0.0.0"):null)),He=n.getAllSnapAvailableUpdates=(0,d.createSelector)([Ue,Be],((e,t)=>{const n=new Map;return Object.keys(e).forEach((a=>{const r=qe(t,a);n.set(a,!!r&&u.default.gt(r,e[a].version))})),n})),Fe=(n.getAnySnapUpdateAvailable=(0,d.createSelector)([He],(e=>[...e.values()].some((e=>!0===e)))),n.getHideSnapBranding=(0,F.createDeepEqualSelector)([Ue,Le],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.hideSnapBranding})),n.getMemoizedTargetSubjectMetadata=(0,F.createDeepEqualSelector)(ve,(e=>e)),n.getMemoizedUnapprovedConfirmations=(0,F.createDeepEqualSelector)(Oe,(e=>e)),n.getMemoizedUnapprovedTemplatedConfirmations=(0,F.createDeepEqualSelector)(we,(e=>e)),(e,t)=>t),Ge=n.getMemoizedInterfaces=(0,F.createDeepEqualSelector)((e=>e.metamask.interfaces),(e=>e)),Ke=n.getInterface=(0,d.createSelector)([Ge,Fe],((e,t)=>e[t])),xe=(n.getMemoizedInterface=(0,F.createDeepEqualSelector)(Ke,(e=>e)),n.getInterfaceContent=(0,d.createSelector)([Ge,Fe],((e,t)=>{var n;return null===(n=e[t])||void 0===n?void 0:n.content})));n.getMemoizedInterfaceContent=(0,F.createDeepEqualSelector)(xe,(e=>e)),n.getMultipleTargetsSubjectMetadata=(0,F.createDeepEqualSelector)([Be,(e,t)=>t],((e,t)=>Object.keys(t??{}).reduce(((t,n)=>(t[n]=ve(e,n),t)),{})));function je(e){const{rpcPrefs:t}=(0,m.getProviderConfig)(e);return t}function Ve(e){return e.activeTab.origin}function Ye(e){return e.metamask.useExternalServices}function Qe(e){return e.metamask.currencyRates}n.getUSDConversionRateByChainId=e=>(0,d.createSelector)(Qe,(t=>Ie(t,e)),((e,t)=>{var n;if(!t)return undefined;const{nativeCurrency:a}=t;return null===(n=e[a])||void 0===n?void 0:n.usdConversionRate}));n.getIsBridgeEnabled=(0,d.createSelector)([function(e){var t;return null===(t=e.metamask.bridgeState)||void 0===t?void 0:t.bridgeFeatureFlags},Ye],((e,t)=>{var n;return(t&&(null==e||null===(n=e[W.BridgeFeatureFlagsKey.EXTENSION_CONFIG])||void 0===n?void 0:n.support))??!1}));function ze(e){return A.CHAIN_ID_TOKEN_IMAGE_MAP[e]??undefined}n.getMemoizedMetaMaskInternalAccounts=(0,F.createDeepEqualSelector)(j.getInternalAccounts,(e=>e)),n.selectERC20TokensByChain=(0,F.createDeepEqualSelector)((e=>e.metamask.tokensChainsCache),(e=>e));const $e=n.selectERC20Tokens=(0,F.createDeepEqualSelector)((e=>e.metamask.tokenList),(e=>e)),Xe=n.getTokenList=(0,d.createSelector)($e,At,((e,t)=>t?y.STATIC_MAINNET_TOKEN_LIST:e)),Ze=n.getMemoizedMetadataContract=(0,d.createSelector)(((e,t)=>Xe(e)),((e,t)=>t),((e,t)=>e[null==t?void 0:t.toLowerCase()])),Je=(n.getMetadataContractName=(0,d.createSelector)(Ze,(e=>(null==e?void 0:e.name)??"")),e=>e.confirmTransaction.txData);n.getTxData=Je;const et=n.getUnapprovedTransaction=(0,F.createDeepEqualSelector)((e=>(0,K.getUnapprovedTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t)))),tt=n.getTransaction=(0,F.createDeepEqualSelector)((e=>(0,K.getCurrentNetworkTransactions)(e)),((e,t)=>t),((e,t)=>Object.values(e).find((({id:e})=>e===t))||{})),nt=(n.getFullTxData=(0,F.createDeepEqualSelector)(Je,((e,t,n)=>n===T.TransactionStatus.unapproved?et(e,t)??{}:tt(e,t)),((e,t,n,a,r)=>({customTxParamsData:a,hexTransactionAmount:r})),((e,t,{customTxParamsData:n,hexTransactionAmount:a})=>{let r={...e,...t};return t&&t.simulationFails&&(r.simulationFails={...t.simulationFails}),n&&(r={...r,txParams:{...r.txParams,data:n}}),a&&(r={...r,txParams:{...r.txParams,value:a}}),r})),n.getAllConnectedAccounts=(0,F.createDeepEqualSelector)(x.getConnectedSubjectsForAllAddresses,(e=>Object.keys(e)))),at=n.getConnectedSitesList=(0,F.createDeepEqualSelector)(x.getConnectedSubjectsForAllAddresses,j.getInternalAccounts,nt,((e,t,n)=>{const a={};return n.forEach((n=>{e[n].forEach((e=>{const r=e.origin,o=t.find((e=>(0,P.isEqualCaseInsensitive)(e.address,n)));a[r]?(a[r].addresses.push(n),a[r].addressToNameMap[n]=(null==o?void 0:o.metadata.name)||""):a[r]={...e,addresses:[n],addressToNameMap:{[n]:(null==o?void 0:o.metadata.name)||""}}}))})),a}));n.getConnectedSnapsList=(0,F.createDeepEqualSelector)(Nt,(e=>{const t={};return Object.values(e).forEach((e=>{t[e.name]||(t[e.name]=e)})),t})),n.getMemoizedCurrentChainId=(0,F.createDeepEqualSelector)(m.getCurrentChainId,(e=>e));function rt(e){return e.metamask.snaps}function ot(e){return e.metamask.currentLocale}n.getSnap=(0,F.createDeepEqualSelector)(rt,((e,t)=>t),((e,t)=>e[t]));const st=n.getSnapsMetadata=(0,F.createDeepEqualSelector)(ot,rt,((e,t)=>Object.values(t).reduce(((t,n)=>{const a=n.id,r=n.localizationFiles?(0,i.getLocalizedSnapManifest)(n.manifest,e,n.localizationFiles):n.manifest;return t[a]={name:r.proposedName,description:r.description,hidden:n.hidden},t}),{}))),it=n.getSnapMetadata=(0,F.createDeepEqualSelector)(st,((e,t)=>t),((e,t)=>e[t]??{name:t?(0,i.stripSnapPrefix)(t):null})),ct=n.getEnabledSnaps=(0,F.createDeepEqualSelector)(rt,(e=>Object.values(e).reduce(((e,t)=>(t.enabled&&(e[t.id]=t),e)),{}))),ut=(n.getPreinstalledSnaps=(0,F.createDeepEqualSelector)(rt,(e=>Object.values(e).reduce(((e,t)=>(t.preinstalled&&(e[t.id]=t),e)),{}))),n.getInsightSnaps=(0,F.createDeepEqualSelector)(ct,x.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:transaction-insight"]}))))),dt=n.getSettingsPageSnaps=(0,F.createDeepEqualSelector)(ct,x.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e,preinstalled:n})=>{var a;return(null===(a=t[e])||void 0===a?void 0:a.permissions[S.SnapEndowments.SettingsPage])&&n&&!(0,G.isSnapIgnoredInProd)(e)})))),lt=n.getSignatureInsightSnaps=(0,F.createDeepEqualSelector)(ct,x.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:signature-insight"]}))));n.getSignatureInsightSnapIds=(0,F.createDeepEqualSelector)(lt,(e=>e.map((e=>e.id)))),n.getInsightSnapIds=(0,F.createDeepEqualSelector)(ut,(e=>e.map((e=>e.id)))),n.getNameLookupSnapsIds=(0,F.createDeepEqualSelector)(ct,x.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions["endowment:name-lookup"]})).map((e=>e.id)))),n.getSettingsPageSnapsIds=(0,F.createDeepEqualSelector)(dt,(e=>e.map((e=>e.id)))),n.getNotifySnaps=(0,F.createDeepEqualSelector)(ct,x.getPermissionSubjects,((e,t)=>Object.values(e).filter((({id:e})=>{var n;return null===(n=t[e])||void 0===n?void 0:n.permissions.snap_notify}))));n.getSnapInsights=(0,F.createDeepEqualSelector)((function(e){return e.metamask.insights}),((e,t)=>t),((e,t)=>null==e?void 0:e[t]));function Tt(e){return e.metamask.pinnedAccountList}function gt(e){return e.metamask.hiddenAccountList}function Et(e){const t=(0,K.getAllUnapprovedTransactions)(e),n=he(e),a={...t,...e.metamask.unapprovedDecryptMsgs,...e.metamask.unapprovedPersonalMsgs,...e.metamask.unapprovedEncryptionPublicKeyMsgs,...e.metamask.unapprovedTypedMessages};return Object.keys(a).length+n}const St=n.getCurrentNetwork=(0,F.createDeepEqualSelector)(m.getNetworkConfigurationsByChainId,m.getCurrentChainId,((e,t)=>{var n;const a=e[t],r=a.rpcEndpoints[a.defaultRpcEndpointIndex],o=null===(n=a.blockExplorerUrls)||void 0===n?void 0:n[a.defaultBlockExplorerUrlIndex];return{chainId:a.chainId,id:r.networkClientId,nickname:a.name,rpcUrl:r.url,ticker:a.nativeCurrency,blockExplorerUrl:o,rpcPrefs:{blockExplorerUrl:o,imageUrl:A.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[a.chainId]},...r.type===E.RpcEndpointType.Infura&&{providerType:r.networkClientId}}}));n.getSelectedNetwork=(0,F.createDeepEqualSelector)(m.getSelectedNetworkClientId,m.getNetworkConfigurationsByChainId,((e,t)=>{if(e===undefined)throw new Error("No network is selected");const n=Object.values(t).find((t=>t.rpcEndpoints.some((t=>t.networkClientId===e))));if(n===undefined)throw new Error("Could not find network configuration for selected network client");return{configuration:n,clientId:e}})),n.getConnectedSitesListWithNetworkInfo=(0,F.createDeepEqualSelector)(at,Se,m.getNetworkConfigurationsByChainId,St,((e,t,n,a)=>(Object.keys(e).forEach((r=>{const o=Object.values(n).find((e=>e.rpcEndpoints.some((e=>e.networkClientId===t[r]))));e[r].networkIconUrl=A.CHAIN_ID_TO_NETWORK_IMAGE_URL_MAP[null==o?void 0:o.chainId]||"",e[r].networkName=(null==o?void 0:o.name)||(null==a?void 0:a.nickname)||""})),e)));function mt(e){return Boolean(e.metamask.useTokenDetection)}n.getAllEnabledNetworks=(0,F.createDeepEqualSelector)(m.getNetworkConfigurationsByChainId,De,((e,t)=>Object.entries(e).reduce(((e,[n,a])=>(!t&&A.TEST_CHAINS.includes(n)||(e[n]=a),e)),{}))),n.getAllChainsToPoll=(0,F.createDeepEqualSelector)(m.getNetworkConfigurationsByChainId,m.getCurrentChainId,((e,t)=>Object.keys(e).filter((e=>e===t||A.FEATURED_NETWORK_CHAIN_IDS.includes(e))))),n.getChainIdsToPoll=(0,F.createDeepEqualSelector)(m.getNetworkConfigurationsByChainId,m.getCurrentChainId,Pe,((e,t,n)=>n?[t]:Object.keys(e).filter((e=>e===t||A.FEATURED_NETWORK_CHAIN_IDS.includes(e))))),n.getNetworkClientIdsToPoll=(0,F.createDeepEqualSelector)(m.getNetworkConfigurationsByChainId,m.getCurrentChainId,Pe,((e,t,n)=>{if(n){const n=e[t];return[n.rpcEndpoints[n.defaultRpcEndpointIndex].networkClientId]}return Object.entries(e).reduce(((e,[n,a])=>((n===t||A.FEATURED_NETWORK_CHAIN_IDS.includes(n))&&e.push(a.rpcEndpoints[a.defaultRpcEndpointIndex].networkClientId),e)),[])}));function _t(e){const t=(0,m.getCurrentChainId)(e);return[A.CHAIN_IDS.MAINNET,A.CHAIN_IDS.BSC,A.CHAIN_IDS.POLYGON,A.CHAIN_IDS.AVALANCHE,A.CHAIN_IDS.LINEA_GOERLI,A.CHAIN_IDS.LINEA_SEPOLIA,A.CHAIN_IDS.LINEA_MAINNET,A.CHAIN_IDS.ARBITRUM,A.CHAIN_IDS.OPTIMISM,A.CHAIN_IDS.BASE,A.CHAIN_IDS.ZKSYNC_ERA,A.CHAIN_IDS.CRONOS,A.CHAIN_IDS.CELO,A.CHAIN_IDS.GNOSIS,A.CHAIN_IDS.FANTOM,A.CHAIN_IDS.POLYGON_ZKEVM,A.CHAIN_IDS.MOONBEAM,A.CHAIN_IDS.MOONRIVER].includes(t)}function At(e){const t=ye(e);return!mt(e)&&t}function pt(e){const t=(0,m.getCurrentChainId)(e);return!A.CHAIN_ID_TO_RPC_URL_MAP[t]}n.getTokenDetectionSupportNetworkByChainId=e=>{switch((0,m.getCurrentChainId)(e)){case A.CHAIN_IDS.MAINNET:return A.MAINNET_DISPLAY_NAME;case A.CHAIN_IDS.BSC:return A.BSC_DISPLAY_NAME;case A.CHAIN_IDS.POLYGON:return A.POLYGON_DISPLAY_NAME;case A.CHAIN_IDS.AVALANCHE:return A.AVALANCHE_DISPLAY_NAME;case A.CHAIN_IDS.LINEA_GOERLI:return A.LINEA_GOERLI_DISPLAY_NAME;case A.CHAIN_IDS.LINEA_SEPOLIA:return A.LINEA_SEPOLIA_DISPLAY_NAME;case A.CHAIN_IDS.LINEA_MAINNET:return A.LINEA_MAINNET_DISPLAY_NAME;case A.CHAIN_IDS.ARBITRUM:return A.ARBITRUM_DISPLAY_NAME;case A.CHAIN_IDS.OPTIMISM:return A.OPTIMISM_DISPLAY_NAME;case A.CHAIN_IDS.BASE:return A.BASE_DISPLAY_NAME;case A.CHAIN_IDS.ZKSYNC_ERA:return A.ZK_SYNC_ERA_DISPLAY_NAME;case A.CHAIN_IDS.CRONOS:return A.CRONOS_DISPLAY_NAME;case A.CHAIN_IDS.CELO:return A.CELO_DISPLAY_NAME;case A.CHAIN_IDS.GNOSIS:return A.GNOSIS_DISPLAY_NAME;case A.CHAIN_IDS.FANTOM:return A.FANTOM_DISPLAY_NAME;case A.CHAIN_IDS.POLYGON_ZKEVM:return A.POLYGON_ZKEVM_DISPLAY_NAME;case A.CHAIN_IDS.MOONBEAM:return A.MOONBEAM_DISPLAY_NAME;case A.CHAIN_IDS.MOONRIVER:return A.MOONRIVER_DISPLAY_NAME;default:return""}};n.getUpdatedAndSortedAccounts=(0,F.createDeepEqualSelector)(Te,Tt,gt,x.getOrderedConnectedAccountsForActiveTab,((e,t,n,a)=>{a.forEach((t=>{const n=e.find((e=>e.id===t.id));n&&t.metadata&&(n.connections=!0,n.lastSelected=t.metadata.lastSelected)}));const r=e.filter((e=>e.connections&&e.lastSelected)),o=r.length>0?r.reduce(((e,t)=>e.lastSelected>t.lastSelected?e:t)):null;e.forEach((e=>{e.pinned=Boolean(t.includes(e.address)),e.hidden=Boolean(n.includes(e.address)),e.active=Boolean(o&&e.id===o.id)}));return[...null==t?void 0:t.map((t=>e.find((e=>e.address===t)))).filter((e=>Boolean(e&&t.includes(e.address)&&!(null!=n&&n.includes(e.address))))),...e.filter((e=>!t.includes(e.address)&&!n.includes(e.address))),...e.filter((e=>n.includes(e.address)))]}));function ft(e){return Boolean(e.metamask.useCurrencyRateCheck)}function Nt(e){const t=rt(e);return Object.entries(t).filter((([e,t])=>t.status!==i.SnapStatus.Installing&&(!t.preinstalled||!1===t.hidden))).map((([t,n])=>{const a=ve(e,null==n?void 0:n.id);return{key:t,id:n.id,iconUrl:null==a?void 0:a.iconUrl,subjectType:null==a?void 0:a.subjectType,packageName:(0,i.stripSnapPrefix)(n.id),name:it(e,n.id).name}}))}n.useSafeChainsListValidationSelector=e=>e.metamask.useSafeChainsListValidation}}},{package:"$root$",file:"ui/selectors/selectors.js"}],[7384,{"../../shared/constants/transaction":5681,"../../shared/modules/conversion.utils":5717,"../../shared/modules/selectors/networks":5734,"../../shared/modules/selectors/util":5736,"../helpers/constants/transactions":6700,"../helpers/utils/tx-helper":6736,"./accounts":7361,"./approvals":7363,"@metamask/controller-utils":1509,"@metamask/smart-transactions-controller/dist/types":2465,"@metamask/transaction-controller":2826,reselect:5216},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getUnapprovedTransactions=n.getTransactions=n.getCurrentNetworkTransactions=n.getApprovedAndSignedTransactions=n.getAllUnapprovedTransactions=void 0,n.hasTransactionPendingApprovals=function(e){return(0,S.getApprovalRequestsByType)(e,r.ApprovalType.Transaction).length>0||(0,S.hasPendingApprovals)(e,P)},n.nonceSortedTransactionsSelector=n.nonceSortedPendingTransactionsSelector=n.nonceSortedCompletedTransactionsSelector=n.incomingTxListSelector=void 0,n.selectTransactionMetadata=b,n.unapprovedTypedMessagesSelector=n.unapprovedPersonalMsgsSelector=n.unapprovedMessagesSelector=n.unapprovedEncryptionPublicKeyMsgsSelector=n.unapprovedDecryptMsgsSelector=n.transactionsSelector=n.transactionSubSelector=n.submittedPendingTransactionsSelector=n.smartTransactionsListSelector=n.selectedAddressTxListSelector=n.selectTransactionSender=void 0;var a,r=e("@metamask/controller-utils"),o=e("reselect"),s=e("@metamask/transaction-controller"),i=e("@metamask/smart-transactions-controller/dist/types"),c=e("../helpers/constants/transactions"),u=(a=e("../helpers/utils/tx-helper"))&&a.__esModule?a:{default:a},d=e("../../shared/constants/transaction"),l=e("../../shared/modules/conversion.utils"),T=e("../../shared/modules/selectors/networks"),g=e("../../shared/modules/selectors/util"),E=e("./accounts"),S=e("./approvals");const m=[s.TransactionType.cancel,s.TransactionType.retry],_=[i.SmartTransactionStatuses.PENDING,i.SmartTransactionStatuses.UNKNOWN,i.SmartTransactionStatuses.RESOLVED,i.SmartTransactionStatuses.CANCELLED],A=n.getTransactions=(0,g.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask??{};return null!=t&&t.length?[...t].sort(((e,t)=>e.time-t.time)):[]}),(e=>e)),p=n.getCurrentNetworkTransactions=(0,g.createDeepEqualSelector)((e=>{const t=A(e);if(!t.length)return[];const{chainId:n}=(0,T.getProviderConfig)(e);return t.filter((e=>e.chainId===n))}),(e=>e)),f=(n.getUnapprovedTransactions=(0,g.createDeepEqualSelector)((e=>{const t=p(e);return(0,g.filterAndShapeUnapprovedTransactions)(t)}),(e=>e)),n.getAllUnapprovedTransactions=(0,g.createDeepEqualSelector)((e=>{const{transactions:t}=e.metamask||[];if(null==t||!t.length)return[];const n=[...t].sort(((e,t)=>e.time-t.time));return(0,g.filterAndShapeUnapprovedTransactions)(n)}),(e=>e)),n.getApprovedAndSignedTransactions=(0,g.createDeepEqualSelector)((e=>A(e).filter((e=>[s.TransactionStatus.approved,s.TransactionStatus.signed].includes(e.status)))),(e=>e)),n.incomingTxListSelector=(0,g.createDeepEqualSelector)((e=>{const{incomingTransactionsPreferences:t}=e.metamask;if(!t)return[];const n=p(e),{address:a}=(0,E.getSelectedInternalAccount)(e);return n.filter((e=>e.type===s.TransactionType.incoming&&e.txParams.to===a))}),(e=>e))),N=e=>e.metamask.unapprovedPersonalMsgs;n.unapprovedPersonalMsgsSelector=N;const I=e=>e.metamask.unapprovedDecryptMsgs;n.unapprovedDecryptMsgsSelector=I;const k=e=>e.metamask.unapprovedEncryptionPublicKeyMsgs;n.unapprovedEncryptionPublicKeyMsgsSelector=k;const h=e=>e.metamask.unapprovedTypedMessages;n.unapprovedTypedMessagesSelector=h;const O=e=>{var t;const{address:n}=(0,E.getSelectedInternalAccount)(e);return null===(t=e.metamask.smartTransactionsState)||void 0===t||null===(t=t.smartTransactions)||void 0===t||null===(t=t[(0,T.getCurrentChainId)(e)])||void 0===t?void 0:t.filter((e=>{var t;return(null===(t=e.txParams)||void 0===t?void 0:t.from)===n&&!e.confirmed&&(e.status===i.SmartTransactionStatuses.PENDING||(e.type===s.TransactionType.swap||e.type===s.TransactionType.swapApproval)&&_.includes(e.status))})).map((e=>{var t;return{...e,isSmartTransaction:!0,status:null!==(t=e.status)&&void 0!==t&&t.startsWith("cancelled")?d.SmartTransactionStatus.cancelled:e.status}}))};n.smartTransactionsListSelector=O;const w=n.selectedAddressTxListSelector=(0,o.createSelector)(E.getSelectedInternalAccount,p,O,((e,t=[],n=[])=>t.filter((({txParams:t})=>t.from===e.address)).filter((({type:e})=>e!==s.TransactionType.incoming)).concat(n))),y=n.unapprovedMessagesSelector=(0,o.createSelector)(N,I,k,h,T.getCurrentChainId,((e={},t={},n={},a={},r)=>(0,u.default)({},e,t,n,a,r)||[])),C=n.transactionSubSelector=(0,o.createSelector)(y,f,((e=[],t=[])=>e.concat(t))),R=n.transactionsSelector=(0,o.createSelector)(C,w,((e=[],t=[])=>[...t.concat(e)].sort(((e,t)=>t.time-e.time)))),D=(e,t)=>{const{primaryTransaction:{time:n}={}}=t;let a=e.length;for(let t=0;t<e.length;t++){const r=e[t],{primaryTransaction:{time:o}={}}=r;if(o>n){a=t;break}}e.splice(a,0,t)},M=n.nonceSortedTransactionsSelector=(0,o.createSelector)(R,((e=[])=>{const t=[],n=[],a=[],r={};e.forEach((e=>{const{txParams:{nonce:o}={},status:i,type:u,time:d,txReceipt:T}=e;if(void 0===o||u===s.TransactionType.incoming){const a={transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:!1,hasCancelled:!1,nonce:o};u===s.TransactionType.incoming?n.push(a):D(t,a)}else if(o in r){var g,E;const t=r[o];((e,t)=>{const{time:n}=t;let a=e.length;for(let t=0;t<e.length;t++)if(e[t].time>n){a=t;break}e.splice(a,0,t)})(t.transactions,e);const{primaryTransaction:{time:n=0}={},initialTransaction:{time:a=0}={}}=t,l={isOnChainFailure:"0x0"===(null==T?void 0:T.status),isEphemeral:i===s.TransactionStatus.failed&&"0x0"!==(null==T?void 0:T.status),isRetryOrCancel:m.includes(u),occurredAfterPrimary:d>n,hasPriorityStatus:i in c.PRIORITY_STATUS_HASH,isConfirmed:i===s.TransactionStatus.confirmed,occurredBeforeInitial:d<a,isValidRetry:u===s.TransactionType.retry&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped),isValidCancel:u===s.TransactionType.cancel&&(i in c.PRIORITY_STATUS_HASH||i===s.TransactionStatus.dropped)};l.eligibleForInitial=!l.isRetryOrCancel&&!l.isEphemeral,l.shouldBePrimary=l.isConfirmed||l.isOnChainFailure;const S={isEphemeral:t.primaryTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(g=t.primaryTransaction)||void 0===g||null===(g=g.txReceipt)||void 0===g?void 0:g.status)},_={isEphemeral:t.initialTransaction.status===s.TransactionStatus.failed&&"0x0"!==(null===(E=t.initialTransaction.txReceipt)||void 0===E?void 0:E.status)};(l.shouldBePrimary||S.isEphemeral||l.occurredAfterPrimary&&l.hasPriorityStatus)&&(t.primaryTransaction=e),(l.occurredBeforeInitial&&l.eligibleForInitial||_.isEphemeral&&l.eligibleForInitial)&&(t.initialTransaction=e),l.isValidRetry&&(t.hasRetried=!0),l.isValidCancel&&(t.hasCancelled=!0)}else r[o]={nonce:o,transactions:[e],initialTransaction:e,primaryTransaction:e,hasRetried:e.type===s.TransactionType.retry&&(e.status in c.PRIORITY_STATUS_HASH||e.status===s.TransactionStatus.dropped),hasCancelled:e.type===s.TransactionType.cancel&&(e.status in c.PRIORITY_STATUS_HASH||e.status===s.TransactionStatus.dropped)},((e,t)=>{let n=e.length;for(let a=0;a<e.length;a++){const r=e[a];if(Number((0,l.hexToDecimal)(r))>Number((0,l.hexToDecimal)(t))){n=a;break}}e.splice(n,0,t)})(a,o)}));const o=a.map((e=>r[e]));return((e,t)=>{t.forEach((t=>{D(e,t)}))})(o,n),t.concat(o).map((e=>{var t;if(m.includes(null===(t=e.initialTransaction)||void 0===t?void 0:t.type)){const t=e.transactions.find((e=>!m.includes(e.type)));if(t)return{...e,initialTransaction:t}}return e}))})),P=(n.nonceSortedPendingTransactionsSelector=(0,o.createSelector)(M,((e=[])=>e.filter((({primaryTransaction:e})=>e.status in c.PENDING_STATUS_HASH)))),n.nonceSortedCompletedTransactionsSelector=(0,o.createSelector)(M,((e=[])=>e.filter((({primaryTransaction:e})=>!(e.status in c.PENDING_STATUS_HASH))).reverse())),n.submittedPendingTransactionsSelector=(0,o.createSelector)(R,((e=[])=>e.filter((e=>e.status===s.TransactionStatus.submitted)))),[r.ApprovalType.EthDecrypt,r.ApprovalType.EthGetEncryptionPublicKey,r.ApprovalType.EthSignTypedData,r.ApprovalType.PersonalSign]);function b(e,t){return e.metamask.transactions.find((e=>e.id===t))}n.selectTransactionSender=(0,o.createSelector)(((e,t)=>b(e,t)),(e=>{var t;return null==e||null===(t=e.txParams)||void 0===t?void 0:t.from}))}}},{package:"$root$",file:"ui/selectors/transactions.js"}],[7385,{},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.UPDATE_CUSTOM_NONCE=n.UNLOCK_SUCCEEDED=n.UNLOCK_IN_PROGRESS=n.UNLOCK_FAILED=n.TRANSACTION_ERROR=n.TOKEN_SORT_CRITERIA=n.TOGGLE_NETWORK_MENU=n.TOGGLE_GAS_LOADING_ANIMATION=n.TOGGLE_CURRENCY_INPUT_SWITCH=n.TOGGLE_ACCOUNT_MENU=n.SHOW_SETTINGS_PAGE_ERROR=n.SHOW_SEND_TOKEN_PAGE=n.SHOW_PRIVATE_KEY=n.SHOW_PERMITTED_NETWORK_TOAST_OPEN=n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE=n.SHOW_NFT_STILL_FETCHING_INDICATION=n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST=n.SHOW_LOADING=n.SHOW_KEYRING_SNAP_REMOVAL_RESULT=n.SHOW_IPFS_MODAL_OPEN=n.SHOW_IPFS_MODAL_CLOSE=n.SHOW_CONF_TX_PAGE=n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN=n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE=n.SHOW_ACCOUNTS_PAGE=n.SET_WEBHID_CONNECTED_STATUS=n.SET_SMART_TRANSACTIONS_ERROR=n.SET_SLIDES=n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE=n.SET_SELECTED_NETWORK_CONFIGURATION_ID=n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS=n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS=n.SET_REQUEST_ACCOUNT_TABS=n.SET_REMOVE_NFT_MESSAGE=n.SET_PENDING_TOKENS=n.SET_PARTICIPATE_IN_METAMETRICS=n.SET_OPEN_METAMASK_TAB_IDS=n.SET_NEXT_NONCE=n.SET_NEW_TOKENS_IMPORTED_ERROR=n.SET_NEW_TOKENS_IMPORTED=n.SET_NEW_NFT_ADDED_MESSAGE=n.SET_NEW_NETWORK_ADDED=n.SET_LEDGER_TRANSPORT_STATUS=n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH=n.SET_FIRST_TIME_FLOW_TYPE=n.SET_EDIT_NETWORK=n.SET_DATA_COLLECTION_FOR_MARKETING=n.SET_CUSTOM_TOKEN_AMOUNT=n.SET_CURRENT_LOCALE=n.SET_CONFIRMATION_EXCHANGE_RATES=n.SET_ACCOUNT_LABEL=n.SET_ACCOUNT_DETAILS_ADDRESS=n.SELECTED_ADDRESS_CHANGED=n.SELECTED_ACCOUNT_CHANGED=n.RESET_ONBOARDING=n.QR_CODE_DETECTED=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON=n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF=n.ONBOARDED_IN_THIS_UI_SESSION=n.NETWORK_DROPDOWN_OPEN=n.NETWORK_DROPDOWN_CLOSE=n.MODAL_OPEN=n.MODAL_CLOSE=n.LOCK_METAMASK=n.LOADING_METHOD_DATA_STARTED=n.LOADING_METHOD_DATA_FINISHED=n.IMPORT_TOKENS_POPOVER_OPEN=n.IMPORT_TOKENS_POPOVER_CLOSE=n.IMPORT_NFTS_MODAL_OPEN=n.IMPORT_NFTS_MODAL_CLOSE=n.HIDE_WHATS_NEW_POPUP=n.HIDE_WARNING=n.HIDE_SETTINGS_PAGE_ERROR=n.HIDE_NFT_STILL_FETCHING_INDICATION=n.HIDE_LOADING=n.HIDE_KEYRING_SNAP_REMOVAL_RESULT=n.GO_HOME=n.GAS_FEE_ESTIMATES_UPDATED=n.DISPLAY_WARNING=n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE=n.DEPRECATED_NETWORK_POPOVER_OPEN=n.DEPRECATED_NETWORK_POPOVER_CLOSE=n.DELETE_METAMETRICS_DATA_MODAL_OPEN=n.DELETE_METAMETRICS_DATA_MODAL_CLOSE=n.DATA_DELETION_ERROR_MODAL_OPEN=n.DATA_DELETION_ERROR_MODAL_CLOSE=n.CONNECT_ACCOUNTS_MODAL_OPEN=n.CONNECT_ACCOUNTS_MODAL_CLOSE=n.COMPLETE_ONBOARDING=n.COMPLETED_TX=n.CLOSE_WELCOME_SCREEN=n.CLEAR_SWAP_AND_SEND_STATE=n.CLEAR_PENDING_TOKENS=n.CLEAR_ACCOUNT_DETAILS=n.CHAIN_CHANGED=n.CAPTURE_SINGLE_EXCEPTION=n.ALERT_OPEN=n.ALERT_CLOSE=n.ADDRESS_BOOK_UPDATED=n.ACCOUNT_CHANGED=void 0,n.UPDATE_TRANSACTION_PARAMS=n.UPDATE_METAMASK_STATE=void 0;n.GO_HOME="GO_HOME",n.MODAL_OPEN="UI_MODAL_OPEN",n.MODAL_CLOSE="UI_MODAL_CLOSE",n.SET_CONFIRMATION_EXCHANGE_RATES="SET_CONFIRMATION_EXCHANGE_RATES",n.ALERT_OPEN="UI_ALERT_OPEN",n.ALERT_CLOSE="UI_ALERT_CLOSE",n.QR_CODE_DETECTED="UI_QR_CODE_DETECTED",n.NETWORK_DROPDOWN_OPEN="UI_NETWORK_DROPDOWN_OPEN",n.NETWORK_DROPDOWN_CLOSE="UI_NETWORK_DROPDOWN_CLOSE",n.IMPORT_NFTS_MODAL_OPEN="UI_IMPORT_NFTS_MODAL_OPEN",n.IMPORT_NFTS_MODAL_CLOSE="UI_IMPORT_NFTS_MODAL_CLOSE",n.SHOW_IPFS_MODAL_OPEN="UI_IPFS_MODAL_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_OPEN="UI_PERMITTED_NETWORK_TOAST_OPEN",n.SHOW_PERMITTED_NETWORK_TOAST_CLOSE="UI_PERMITTED_NETWORK_TOAST_CLOSE",n.SHOW_IPFS_MODAL_CLOSE="UI_IPFS_MODAL_CLOSE",n.IMPORT_TOKENS_POPOVER_OPEN="UI_IMPORT_TOKENS_POPOVER_OPEN",n.IMPORT_TOKENS_POPOVER_CLOSE="UI_IMPORT_TOKENS_POPOVER_CLOSE",n.SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN="SHOW_BASIC_FUNCTIONALITY_MODAL_OPEN",n.SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE="SHOW_BASIC_FUNCTIONALITY_MODAL_CLOSE",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_ON",n.ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF="ONBOARDING_TOGGLE_BASIC_FUNCTIONALITY_OFF",n.UPDATE_METAMASK_STATE="UPDATE_METAMASK_STATE",n.SELECTED_ADDRESS_CHANGED="SELECTED_ADDRESS_CHANGED",n.SELECTED_ACCOUNT_CHANGED="SELECTED_ACCOUNT_CHANGED",n.ACCOUNT_CHANGED="ACCOUNT_CHANGED",n.CHAIN_CHANGED="CHAIN_CHANGED",n.ADDRESS_BOOK_UPDATED="ADDRESS_BOOK_UPDATED",n.GAS_FEE_ESTIMATES_UPDATED="GAS_FEE_ESTIMATES_UPDATED",n.CLOSE_WELCOME_SCREEN="CLOSE_WELCOME_SCREEN",n.CLEAR_SWAP_AND_SEND_STATE="CLEAR_SWAP_AND_SEND_STATE",n.UNLOCK_IN_PROGRESS="UNLOCK_IN_PROGRESS",n.UNLOCK_FAILED="UNLOCK_FAILED",n.UNLOCK_SUCCEEDED="UNLOCK_SUCCEEDED",n.LOCK_METAMASK="LOCK_METAMASK",n.DISPLAY_WARNING="DISPLAY_WARNING",n.HIDE_WARNING="HIDE_WARNING",n.SHOW_SETTINGS_PAGE_ERROR="SHOW_SETTINGS_PAGE_ERROR",n.HIDE_SETTINGS_PAGE_ERROR="HIDE_SETTINGS_PAGE_ERROR",n.CAPTURE_SINGLE_EXCEPTION="CAPTURE_SINGLE_EXCEPTION",n.SHOW_ACCOUNTS_PAGE="SHOW_ACCOUNTS_PAGE",n.SHOW_CONF_TX_PAGE="SHOW_CONF_TX_PAGE",n.SHOW_SEND_TOKEN_PAGE="SHOW_SEND_TOKEN_PAGE",n.SHOW_PRIVATE_KEY="SHOW_PRIVATE_KEY",n.SET_ACCOUNT_LABEL="SET_ACCOUNT_LABEL",n.CLEAR_ACCOUNT_DETAILS="CLEAR_ACCOUNT_DETAILS",n.SET_ACCOUNT_DETAILS_ADDRESS="SET_ACCOUNT_DETAILS_ADDRESS",n.COMPLETED_TX="COMPLETED_TX",n.TRANSACTION_ERROR="TRANSACTION_ERROR",n.UPDATE_TRANSACTION_PARAMS="UPDATE_TRANSACTION_PARAMS",n.SET_NEXT_NONCE="SET_NEXT_NONCE",n.SET_HARDWARE_WALLET_DEFAULT_HD_PATH="SET_HARDWARE_WALLET_DEFAULT_HD_PATH",n.SHOW_LOADING="SHOW_LOADING_INDICATION",n.HIDE_LOADING="HIDE_LOADING_INDICATION",n.SHOW_NFT_STILL_FETCHING_INDICATION="SHOW_NFT_STILL_FETCHING_INDICATION",n.HIDE_NFT_STILL_FETCHING_INDICATION="HIDE_NFT_STILL_FETCHING_INDICATION",n.SHOW_NFT_DETECTION_ENABLEMENT_TOAST="SHOW_NFT_DETECTION_ENABLEMENT_TOAST",n.TOGGLE_ACCOUNT_MENU="TOGGLE_ACCOUNT_MENU",n.TOGGLE_NETWORK_MENU="TOGGLE_NETWORK_MENU",n.SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS="SET_SELECTED_ACCOUNTS_FOR_DAPP_CONNECTIONS",n.SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS="SET_SELECTED_NETWORKS_FOR_DAPP_CONNECTIONS",n.DEPRECATED_NETWORK_POPOVER_OPEN="DEPRECATED_NETWORK_POPOVER_OPEN",n.DEPRECATED_NETWORK_POPOVER_CLOSE="DEPRECATED_NETWORK_POPOVER_CLOSE",n.UPDATE_CUSTOM_NONCE="UPDATE_CUSTOM_NONCE",n.SET_PARTICIPATE_IN_METAMETRICS="SET_PARTICIPATE_IN_METAMETRICS",n.SET_DATA_COLLECTION_FOR_MARKETING="SET_DATA_COLLECTION_FOR_MARKETING",n.DELETE_METAMETRICS_DATA_MODAL_OPEN="DELETE_METAMETRICS_DATA_MODAL_OPEN",n.DELETE_METAMETRICS_DATA_MODAL_CLOSE="DELETE_METAMETRICS_DATA_MODAL_CLOSE",n.DATA_DELETION_ERROR_MODAL_OPEN="DELETE_METAMETRICS_DATA_ERROR_MODAL_OPEN",n.DATA_DELETION_ERROR_MODAL_CLOSE="DELETE_METAMETRICS_DATA_ERROR_MODAL_CLOSE",n.SET_CURRENT_LOCALE="SET_CURRENT_LOCALE",n.COMPLETE_ONBOARDING="COMPLETE_ONBOARDING",n.RESET_ONBOARDING="RESET_ONBOARDING",n.ONBOARDED_IN_THIS_UI_SESSION="ONBOARDED_IN_THIS_UI_SESSION",n.SET_WEBHID_CONNECTED_STATUS="SET_WEBHID_CONNECTED_STATUS",n.SET_LEDGER_TRANSPORT_STATUS="SET_LEDGER_TRANSPORT_STATUS",n.SET_PENDING_TOKENS="SET_PENDING_TOKENS",n.CLEAR_PENDING_TOKENS="CLEAR_PENDING_TOKENS",n.SET_FIRST_TIME_FLOW_TYPE="SET_FIRST_TIME_FLOW_TYPE",n.SET_SELECTED_NETWORK_CONFIGURATION_ID="SET_SELECTED_NETWORK_CONFIGURATION_ID",n.SET_NEW_NETWORK_ADDED="SET_NEW_NETWORK_ADDED",n.SET_EDIT_NETWORK="SET_EDIT_NETWORK",n.SET_NEW_NFT_ADDED_MESSAGE="SET_NEW_NFT_ADDED_MESSAGE",n.SET_REMOVE_NFT_MESSAGE="SET_REMOVE_NFT_MESSAGE",n.LOADING_METHOD_DATA_STARTED="LOADING_METHOD_DATA_STARTED",n.LOADING_METHOD_DATA_FINISHED="LOADING_METHOD_DATA_FINISHED",n.SET_REQUEST_ACCOUNT_TABS="SET_REQUEST_ACCOUNT_TABS",n.SET_OPEN_METAMASK_TAB_IDS="SET_OPEN_METAMASK_TAB_IDS",n.HIDE_WHATS_NEW_POPUP="HIDE_WHATS_NEW_POPUP",n.TOGGLE_GAS_LOADING_ANIMATION="TOGGLE_GAS_LOADING_ANIMATION",n.SET_SMART_TRANSACTIONS_ERROR="SET_SMART_TRANSACTIONS_ERROR",n.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE="DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE",n.TOGGLE_CURRENCY_INPUT_SWITCH="TOGGLE_CURRENCY_INPUT_SWITCH",n.SET_NEW_TOKENS_IMPORTED="SET_NEW_TOKENS_IMPORTED",n.SET_NEW_TOKENS_IMPORTED_ERROR="SET_NEW_TOKENS_IMPORTED_ERROR",n.SET_CUSTOM_TOKEN_AMOUNT="SET_CUSTOM_TOKEN_AMOUNT",n.CONNECT_ACCOUNTS_MODAL_OPEN="UI_CONNECT_ACCOUNTS_MODAL_OPEN",n.CONNECT_ACCOUNTS_MODAL_CLOSE="UI_CONNECT_ACCOUNTS_MODAL_CLOSE",n.SHOW_KEYRING_SNAP_REMOVAL_RESULT="SHOW_KEYRING_SNAP_REMOVAL_RESULT",n.HIDE_KEYRING_SNAP_REMOVAL_RESULT="HIDE_KEYRING_SNAP_REMOVAL_RESULT",n.SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE="SET_SHOW_NFT_AUTO_DETECT_MODAL_UPGRADE",n.TOKEN_SORT_CRITERIA="TOKEN_SORT_CRITERIA",n.SET_SLIDES="SET_SLIDES"}}},{package:"$root$",file:"ui/store/actionConstants.ts"}],[7386,{"../../app/scripts/lib/util":174,"../../shared/constants/app":5651,"../../shared/constants/hardware-wallets":5658,"../../shared/constants/metametrics":5662,"../../shared/lib/four-byte":5695,"../../shared/lib/switch-direction":5702,"../../shared/modules/conversion.utils":5717,"../../shared/modules/error":5719,"../../shared/modules/hexstring-utils":5723,"../../shared/modules/i18n":5724,"../../shared/modules/selectors":5733,"../../shared/modules/selectors/networks":5734,"../../shared/modules/string-utils":5737,"../ducks/alerts/unconnected-account":6660,"../ducks/metamask/metamask":6676,"../ducks/send":6681,"../helpers/constants/notifications":6692,"../pages/swaps/swaps.util":7352,"../selectors":7370,"./actionConstants":7385,"./background-connection":7387,"@metamask/keyring-controller":1913,"@metamask/profile-sync-controller/sdk":2239,"@metamask/rpc-errors":2336,"@sentry/browser":3001,buffer:3941,lodash:4787,loglevel:4795},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){(function(t){(function(){Object.defineProperty(n,"__esModule",{value:!0}),n.abortTransactionSigning=function(e){return async t=>{try{await(0,R.submitRequestToBackground)("abortTransactionSigning",[e])}catch(e){t(ae(e))}}},n.accountTrackerStartPolling=async function(e){const t=await(0,R.submitRequestToBackground)("accountTrackerStartPolling",[e]);return await Ee(t),t},n.accountTrackerStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("accountTrackerStopPollingByPollingToken",[e]),await Se(e)},n.addImportedTokens=function(e,t){return async n=>{try{await(0,R.submitRequestToBackground)("addImportedTokens",[e,t])}catch(e){(0,O.logErrorWithMessage)(e)}finally{await ie(n)}}},n.addNetwork=function(e){return async t=>{a.default.debug("background.addNetwork",e);try{return await(0,R.submitRequestToBackground)("addNetwork",[e])}catch(e){(0,O.logErrorWithMessage)(e),t(ae("Had a problem adding networks!"))}return undefined}},n.addNewAccount=function(){return a.default.debug("background.addNewAccount"),async(e,t)=>{const n=(0,T.getInternalAccounts)(t()).filter((e=>e.metadata.keyring.type===i.KeyringTypes.hd));let a;e(J());try{a=await(0,R.submitRequestToBackground)("addNewAccount",[Object.keys(n).length])}catch(t){throw e(ae(t)),t}finally{e(te())}return await ie(e),a}},n.addNft=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||a(J());try{await(0,R.submitRequestToBackground)("addNft",[e,t])}catch(e){(0,O.logErrorWithMessage)(e),a(ae(e))}finally{await ie(a),a(te())}}},n.addNftVerifyOwnership=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot add NFT without address");if(!t)throw new Error("MetaMask - Cannot add NFT without tokenID");n||a(J());try{await(0,R.submitRequestToBackground)("addNftVerifyOwnership",[e,t])}catch(e){if((0,O.isErrorWithMessage)(e)){const t=(0,O.getErrorMessage)(e);if(t.includes("This NFT is not owned by the user")||t.includes("Unable to verify ownership"))throw e;(0,O.logErrorWithMessage)(e),a(ae(e))}}finally{await ie(a),a(te())}}},n.addPermittedAccount=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,R.callBackgroundMethod)("addPermittedAccount",[e,t],(e=>{e?a(e):n()}))})),await ie(n)}},n.addPermittedAccounts=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,R.callBackgroundMethod)("addPermittedAccounts",[e,t],(e=>{e?a(e):n()}))})),await ie(n)}},n.addPermittedChain=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,R.callBackgroundMethod)("addPermittedChain",[e,t],(e=>{e?a(e):n()}))})),await ie(n)}},n.addPermittedChains=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,R.callBackgroundMethod)("addPermittedChains",[e,t],(e=>{e?a(e):n()}))})),await ie(n)}},n.addPollingTokenToAppState=Ee,n.addToAddressBook=function(e,t="",n=""){return a.default.debug("background.addToAddressBook"),async(a,r)=>{const{chainId:o}=(0,g.getProviderConfig)(r());let s;try{s=await(0,R.submitRequestToBackground)("setAddressBook",[(0,_.toChecksumHexAddress)(e),t,o,n]),await ie(a)}catch(e){throw(0,O.logErrorWithMessage)(e),a(ae("Address book failed to update")),e}s||a(ae("Address book failed to update"))}},n.addToken=function({address:e,symbol:t,decimals:n,image:a,networkClientId:r},o){return async s=>{if(!e)throw new Error("MetaMask - Cannot add token without address");o||s(J());try{await(0,R.submitRequestToBackground)("addToken",[{address:e,symbol:t,decimals:n,image:a,networkClientId:r}])}catch(e){(0,O.logErrorWithMessage)(e),s(ae(e))}finally{await ie(s),s(te())}}},n.addTransaction=async function(e,t){a.default.debug("background.addTransaction");const n=(0,R.generateActionId)();return await(0,R.submitRequestToBackground)("addTransaction",[e,{...t,origin:d.ORIGIN_METAMASK,actionId:n}])},n.addTransactionAndRouteToConfirmationPage=function(e,t){return async n=>{const r=(0,R.generateActionId)();try{a.default.debug("background.addTransaction");const o=await(0,R.submitRequestToBackground)("addTransaction",[e,{...t,actionId:r,origin:d.ORIGIN_METAMASK}]);return n(Q()),o}catch(e){throw n(te()),n(ae(e)),e}}},n.addTransactionAndWaitForPublish=async function(e,t){a.default.debug("background.addTransactionAndWaitForPublish");const n=(0,R.generateActionId)();return await(0,R.submitRequestToBackground)("addTransactionAndWaitForPublish",[e,{...t,origin:d.ORIGIN_METAMASK,actionId:n}])},n.approvePermissionsRequest=function(e){return t=>{(0,R.callBackgroundMethod)("approvePermissionsRequest",[e],(e=>{e&&t(ae(e)),ie(t)}))}},n.attemptLedgerTransportCreation=async function(){return await(0,R.submitRequestToBackground)("attemptLedgerTransportCreation")},n.automaticallySwitchNetwork=function(e,t){return async n=>{await $(e),await n(z({networkClientId:e,origin:t})),await ie(n)}},n.backupUserData=async function(){let e;try{e=await(0,R.submitRequestToBackground)("backupUserData")}catch(e){throw(0,O.logErrorWithMessage)(e),e}return e},n.cancelDecryptMsg=function(e){return async t=>{t(J());try{await(0,R.submitRequestToBackground)("cancelDecryptMessage",[e.id])}finally{t(te())}return await ie(t),t(W(e.id)),t(Z()),e}},n.cancelEncryptionPublicKeyMsg=function(e){return async t=>{t(J());try{await(0,R.submitRequestToBackground)("cancelEncryptionPublicKey",[e.id])}finally{t(te())}return await ie(t),t(W(e.id)),t(Z()),e}},n.cancelQRHardwareSignRequest=function(){return async e=>{e(te()),await(0,R.submitRequestToBackground)("cancelQRHardwareSignRequest")}},n.cancelSmartTransaction=function(e){return async t=>{try{await(0,R.submitRequestToBackground)("cancelSmartTransaction",[e])}catch(e){if((0,O.logErrorWithMessage)(e),(0,O.isErrorWithMessage)(e)){const n=(0,O.getErrorMessage)(e);if(n.startsWith("Fetch error:")){const e=(0,f.parseSmartTransactionsError)(n);t({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.cancelSyncQRHardware=function(){return async e=>{e(te()),await(0,R.submitRequestToBackground)("cancelSyncQRHardware")}},n.cancelTx=function(e,t=!0){return n=>(t&&n(J()),new Promise(((t,n)=>{(0,R.callBackgroundMethod)("rejectPendingApproval",[String(e.id),s.providerErrors.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))})).then((()=>ie(n))).then((()=>(n((0,E.resetSendState)()),n(W(e.id)),n(te()),n(Z()),e))).catch((e=>{throw n(te()),e})))},n.cancelTxs=function(e){return async t=>{t(J());try{const n=e.map((({id:e})=>e)),a=n.map((e=>new Promise(((t,n)=>{(0,R.callBackgroundMethod)("rejectPendingApproval",[String(e),s.providerErrors.userRejectedRequest().serialize()],(e=>{e?n(e):t()}))}))));await Promise.all(a),await ie(t),t((0,E.resetSendState)()),n.forEach((e=>{t(W(e))}))}finally{(0,l.getEnvironmentType)()===d.ENVIRONMENT_TYPE_NOTIFICATION?me():t(te())}}},n.captureSingleException=function(e){return async(t,n)=>{const{singleExceptions:a}=n().appState;e in a||(t({type:C.CAPTURE_SINGLE_EXCEPTION,value:e}),(0,r.captureException)(Error(e)))}},n.checkAccountsPresence=function(e){return async()=>{try{return await(0,R.submitRequestToBackground)("checkAccountsPresence",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.checkAndUpdateAllNftsOwnershipStatus=async function(){await(0,R.submitRequestToBackground)("checkAndUpdateAllNftsOwnershipStatus")},n.checkAndUpdateSingleNftOwnershipStatus=async function(e){await(0,R.submitRequestToBackground)("checkAndUpdateSingleNftOwnershipStatus",[e,!1])},n.checkHardwareStatus=function(e,t){return a.default.debug("background.checkHardwareStatus",e,t),async n=>{n(J());let a=!1;try{a=await(0,R.submitRequestToBackground)("checkHardwareStatus",[e,t])}catch(e){throw(0,O.logErrorWithMessage)(e),n(ae(e)),e}finally{n(te())}return await ie(n),a}},n.clearAccountDetails=function(){return{type:C.CLEAR_ACCOUNT_DETAILS}},n.clearPendingTokens=function(){return{type:C.CLEAR_PENDING_TOKENS}},n.clearSmartTransactionFees=function(){(0,R.submitRequestToBackground)("clearSmartTransactionFees")},n.clearSwapsQuotes=function(){return async e=>{await(0,R.submitRequestToBackground)("clearSwapsQuotes"),await ie(e)}},n.clearSwitchedNetworkDetails=function(){return async e=>{await(0,R.submitRequestToBackground)("clearSwitchedNetworkDetails",[]),await ie(e)}},n.closeCurrentNotificationWindow=Z,n.closeNotificationPopup=me,n.closeWelcomeScreen=function(){return{type:C.CLOSE_WELCOME_SCREEN}},n.completeOnboarding=oe,n.completedTx=W,n.connectHardware=function(e,t,n,r){return a.default.debug("background.connectHardware",e,t,n),async(a,s)=>{const{ledgerTransportType:i}=s().metamask;let c;a(J(`Looking for your ${(0,o.capitalize)(e)}...`));try{if(e===A.HardwareDeviceNames.ledger&&i===A.LedgerTransportTypes.webhid){const e=await window.navigator.hid.requestDevice({filters:[{vendorId:A.LEDGER_USB_VENDOR_ID}]});if(!e.some((e=>e.vendorId===Number(A.LEDGER_USB_VENDOR_ID))))throw new Error(r("ledgerWebHIDNotConnectedErrorMessage"))}c=await(0,R.submitRequestToBackground)("connectHardware",[e,t,n])}catch(t){(0,O.logErrorWithMessage)(t);const n=(0,O.getErrorMessage)(t);throw e===A.HardwareDeviceNames.ledger&&i===A.LedgerTransportTypes.webhid&&(0,O.isErrorWithMessage)(t)&&n.match("Failed to open the device")?(a(ae(r("ledgerDeviceOpenFailureMessage"))),new Error(r("ledgerDeviceOpenFailureMessage"))):(e!==A.HardwareDeviceNames.qr&&a(ae(t)),t)}finally{a(te())}return await ie(a),c}},n.createCancelTransaction=function(e,t,n={}){let r;return a.default.debug("background.createCancelTransaction"),a=>{const o=(0,R.generateActionId)();return new Promise(((s,i)=>{(0,R.callBackgroundMethod)("createCancelTransaction",[e,t,{...n,actionId:o}],((t,n)=>{var o;if(t)return null!=t&&null!==(o=t.message)&&void 0!==o&&o.includes("Previous transaction is already confirmed")&&a(X({name:"TRANSACTION_ALREADY_CONFIRMED",originalTransactionId:e})),a(ae(t)),void i(t);if(n){const e=(0,T.getCurrentNetworkTransactions)({metamask:n}),{id:t}=e[e.length-1];r=t,s()}}))})).then((()=>ie(a))).then((()=>r))}},n.createEventFragment=function(e){const t=(0,R.generateActionId)();return(0,R.submitRequestToBackground)("createEventFragment",[{...e,actionId:t}])},n.createMetaMetricsDataDeletionTask=async function(){return await(0,R.submitRequestToBackground)("createMetaMetricsDataDeletionTask")},n.createNewVault=v,n.createNewVaultAndGetSeedPhrase=function(e){return async t=>{t(J());try{await v(e);return await L(e)}catch(e){throw t(ae(e)),(0,O.isErrorWithMessage)(e)?new Error((0,O.getErrorMessage)(e)):e}finally{t(te())}}},n.createNewVaultAndRestore=function(e,n){return r=>{r(J()),a.default.debug("background.createNewVaultAndRestore");const o=Array.from(t.from(n,"utf8").values());return new Promise(((t,n)=>{(0,R.callBackgroundMethod)("createNewVaultAndRestore",[e,o],(e=>{e?n(e):t()}))})).then((()=>r(H()))).then((()=>{r(Y()),r(te())})).catch((e=>(r(ae(e)),r(te()),Promise.reject(e))))}},n.createOnChainTriggers=function(){return async()=>{try{await(0,R.submitRequestToBackground)("createOnChainTriggers")}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.createRetryTransaction=function(e,t){let n;return a=>new Promise(((r,o)=>{const s=(0,R.generateActionId)();(0,R.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{actionId:s}],((e,t)=>{if(e)return a(ae(e)),void o(e);if(t){const e=(0,T.getCurrentNetworkTransactions)(t);n=e[e.length-1],r()}}))})).then((()=>ie(a))).then((()=>n))},n.createSpeedUpTransaction=function(e,t,n={}){let r;return a.default.debug("background.createSpeedUpTransaction"),a=>{const o=(0,R.generateActionId)();return new Promise(((s,i)=>{(0,R.callBackgroundMethod)("createSpeedUpTransaction",[e,t,{...n,actionId:o}],((e,t)=>{if(e)return a(ae(e)),void i(e);if(t){const e=(0,T.getCurrentNetworkTransactions)(t);r=e[e.length-1],s()}}))})).then((()=>ie(a))).then((()=>r))}},n.createTransactionEventFragment=function(e){const t=(0,R.generateActionId)();return(0,R.submitRequestToBackground)("createTransactionEventFragment",[{transactionId:e,actionId:t}])},n.currencyRateStartPolling=async function(e){const t=await(0,R.submitRequestToBackground)("currencyRateStartPolling",[{nativeCurrencies:e}]);return await Ee(t),t},n.currencyRateStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("currencyRateStopPollingByPollingToken",[e]),await Se(e)},n.decodeTransactionData=async function({transactionData:e,contractAddress:t,chainId:n}){return await(0,R.submitRequestToBackground)("decodeTransactionData",[{transactionData:e,contractAddress:t,chainId:n}])},n.decryptMsg=function(e){return a.default.debug("action - decryptMsg"),async t=>{t(J()),a.default.debug("actions calling background.decryptMessage");try{await(0,R.submitRequestToBackground)("decryptMessage",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),t(ae(e)),e}finally{t(te())}return await ie(t),t(W(e.metamaskId)),t(Z()),e}},n.decryptMsgInline=function(e){return a.default.debug("action - decryptMsgInline"),async t=>{a.default.debug("actions calling background.decryptMessageInline");try{await(0,R.submitRequestToBackground)("decryptMessageInline",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),t(ae(e)),e}return(await ie(t)).unapprovedDecryptMsgs[e.metamaskId]}},n.deleteAccountSyncingDataFromUserStorage=function(){return async()=>{try{return await(0,R.submitRequestToBackground)("deleteAccountSyncingDataFromUserStorage",[c.USER_STORAGE_FEATURE_NAMES.accounts])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.deleteExpiredNotifications=function(){return async(e,t)=>{const n=t().metamask.metamaskNotificationsList.filter((e=>{const t=new Date(Date.now()-y.NOTIFICATIONS_EXPIRATION_DELAY);return Boolean(e.readDate&&new Date(e.readDate)<t)})).map((({id:e})=>e));n.length&&(await(0,R.submitRequestToBackground)("deleteNotificationsById",[n]),await ie(e))}},n.deleteInterface=function(e){return async t=>{await(0,R.submitRequestToBackground)("deleteInterface",[e]),await ie(t)}},n.deleteNotificationsById=function(e){return async()=>{try{return await(0,R.submitRequestToBackground)("deleteNotificationsById",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.deleteOnChainTriggersByAccount=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("deleteOnChainTriggersByAccount",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.detectNfts=function(){return async e=>{e(ee()),a.default.debug("background.detectNfts");try{await(0,R.submitRequestToBackground)("detectNfts")}finally{e(ne())}await ie(e)}},n.detectTokens=function(){return async e=>{e(J()),a.default.debug("background.detectTokens"),await(0,R.submitRequestToBackground)("detectTokens"),e(te()),await ie(e)}},n.disableMetamaskNotifications=function(){return async()=>{try{await(0,R.submitRequestToBackground)("disableMetamaskNotifications")}catch(e){throw a.default.error(e),e}}},n.disableProfileSyncing=function(){return async()=>{try{await(0,R.submitRequestToBackground)("disableProfileSyncing")}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.disableSnap=function(e){return async t=>{await(0,R.submitRequestToBackground)("disableSnap",[e]),await ie(t)}},n.disconnectOriginFromSnap=function(e,t){return async n=>{await(0,R.submitRequestToBackground)("disconnectOriginFromSnap",[e,t]),await ie(n)}},n.dismissSmartTransactionsErrorMessage=function(){return{type:C.DISMISS_SMART_TRANSACTIONS_ERROR_MESSAGE}},n.displayWarning=ae,n.enableMetamaskNotifications=function(){return async()=>{try{await(0,R.submitRequestToBackground)("enableMetamaskNotifications")}catch(e){throw a.default.error(e),e}}},n.enableProfileSyncing=function(){return async()=>{try{await(0,R.submitRequestToBackground)("enableProfileSyncing")}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.enableSnap=function(e){return async t=>{await(0,R.submitRequestToBackground)("enableSnap",[e]),await ie(t)}},n.encryptionPublicKeyMsg=function(e){return a.default.debug("action - encryptionPublicKeyMsg"),async t=>{t(J()),a.default.debug("actions calling background.encryptionPublicKey");try{await(0,R.submitRequestToBackground)("encryptionPublicKey",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),t(ae(e)),e}finally{t(te())}return await ie(t),t(W(e.metamaskId)),t(Z()),e}},n.endBackgroundTrace=async function(e){const t=e.timestamp||performance.timeOrigin+performance.now();await(0,R.submitRequestToBackground)("endTrace",[{...e,timestamp:t}])},n.estimateGas=function(e){return(0,R.submitRequestToBackground)("estimateGas",[e])},n.exportAccount=function(e,t,n,r){return function(o){return o(J()),a.default.debug("background.verifyPassword"),new Promise(((s,i)=>{(0,R.callBackgroundMethod)("verifyPassword",[e],(function(c){if(c)return a.default.error("Error in verifying password."),o(te()),o(ae("Incorrect Password.")),void i(c);a.default.debug("background.exportAccount"),(0,R.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(o(te()),e)return(0,O.logErrorWithMessage)(e),o(ae("Had a problem exporting the account.")),void i(e);n(t),r(!0),s(t)}))}))}))}},n.exportAccounts=function(e,t){return function(n){return a.default.debug("background.verifyPassword"),new Promise(((r,o)=>{(0,R.callBackgroundMethod)("verifyPassword",[e],(function(s){if(s)return a.default.error("Error in submitting password."),void o(s);a.default.debug("background.exportAccounts");const i=t.map((t=>new Promise(((a,r)=>(0,R.callBackgroundMethod)("exportAccount",[t,e],(function(e,t){if(e)return(0,O.logErrorWithMessage)(e),n(ae("Had a problem exporting the account.")),void r(e);a(t)}))))));r(Promise.all(i))}))}))}},n.fetchAndSetQuotes=function(e,t){return async n=>{const[a,r]=await(0,R.submitRequestToBackground)("fetchAndSetQuotes",[e,t]);return await ie(n),[a,r]}},n.fetchAndUpdateMetamaskNotifications=function(e){return async()=>{try{return await(0,R.submitRequestToBackground)("fetchAndUpdateMetamaskNotifications",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.fetchSmartTransactionFees=function(e,t){return async n=>{t&&(t.value="0x0");try{const a=await await(0,R.submitRequestToBackground)("fetchSmartTransactionFees",[e,t]);return n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:null}),a}catch(e){if((0,O.logErrorWithMessage)(e),(0,O.isErrorWithMessage)(e)){const t=(0,O.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,f.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.fetchSmartTransactionsLiveness=function(){return async()=>{try{await(0,R.submitRequestToBackground)("fetchSmartTransactionsLiveness")}catch(e){(0,O.logErrorWithMessage)(e)}}},n.finalizeEventFragment=function(e,t){return(0,R.submitRequestToBackground)("finalizeEventFragment",[e,t])},n.forceUpdateMetamaskState=ie,n.forgetDevice=function(e){return a.default.debug("background.forgetDevice",e),async t=>{t(J());try{await(0,R.submitRequestToBackground)("forgetDevice",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),t(ae(e)),e}finally{t(te())}await ie(t)}},n.gasFeeStartPollingByNetworkClientId=async function(e){const t=await(0,R.submitRequestToBackground)("gasFeeStartPolling",[{networkClientId:e}]);return await Ee(t),t},n.gasFeeStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("gasFeeStopPollingByPollingToken",[e]),await Se(e)},n.getBalancesInSingleCall=async function(e,t,n){return await(0,R.submitRequestToBackground)("getBalancesInSingleCall",[e,t,n])},n.getContractMethodData=function(e=""){return async(t,n)=>{const r=(0,l.addHexPrefix)(e).slice(0,10);if(r.length<10)return{};const{knownMethodData:o,use4ByteResolution:s}=n().metamask;if(null!=o&&o[r]&&0!==Object.keys(o[r]).length)return o[r];a.default.debug("loadingMethodData");const{name:i,params:c}=await(0,w.getMethodDataAsync)(r,s);return(0,R.callBackgroundMethod)("addKnownMethodData",[r,{name:i,params:c}],(e=>{e&&t(ae(e))})),{name:i,params:c}}},n.getCurrentNetworkEIP1559Compatibility=async function(){let e;try{e=await(0,R.submitRequestToBackground)("getCurrentNetworkEIP1559Compatibility")}catch(e){console.error(e)}return e},n.getGasFeeTimeEstimate=function(e,t){return(0,R.submitRequestToBackground)("getGasFeeTimeEstimate",[e,t])},n.getLastInteractedConfirmationInfo=async function(){return await(0,R.submitRequestToBackground)("getLastInteractedConfirmationInfo")},n.getLayer1GasFee=function({chainId:e,networkClientId:t,transactionParams:n}){return async()=>await(0,R.submitRequestToBackground)("getLayer1GasFee",[{chainId:e,networkClientId:t,transactionParams:n}])},n.getNFTContractInfo=async function(e,t){return await(0,R.submitRequestToBackground)("getNFTContractInfo",[e,t])},n.getNetworkConfigurationByNetworkClientId=async function(e){let t;try{t=await(0,R.submitRequestToBackground)("getNetworkConfigurationByNetworkClientId",[e])}catch(e){console.error(e)}return t},n.getNextAvailableAccountName=async function(e){return await(0,R.submitRequestToBackground)("getNextAvailableAccountName",[e])},n.getNextNonce=function(e){return async(t,n)=>{const a=(0,g.getSelectedNetworkClientId)(n());let r;try{r=await(0,R.submitRequestToBackground)("getNextNonce",[e,a])}catch(e){throw t(ae(e)),e}return t(le(r)),r}},n.getOpenMetamaskTabsIds=function(){return async e=>{e(ge(await(0,R.submitRequestToBackground)("getOpenMetamaskTabsIds")))}},n.getPhishingResult=async function(e){return await(0,R.submitRequestToBackground)("getPhishingResult",[e])},n.getRequestAccountTabIds=function(){return async e=>{e(Te(await(0,R.submitRequestToBackground)("getRequestAccountTabIds")))}},n.getRpcMethodPreferences=function(){return async e=>{e(J()),await(0,R.submitRequestToBackground)("getRpcMethodPreferences",[]),e(te())}},n.getSeedPhrase=L,n.getSnapAccountsById=async function(e){return await(0,R.submitRequestToBackground)("getAccountsBySnapId",[e])},n.getTokenStandardAndDetails=async function(e,t,n){return await(0,R.submitRequestToBackground)("getTokenStandardAndDetails",[e,t,n])},n.getTokenSymbol=async function(e){return await(0,R.submitRequestToBackground)("getTokenSymbol",[e])},n.getTransactions=async function(e={}){return await(0,R.submitRequestToBackground)("getTransactions",[e])},n.goHome=P,n.handleSnapRequest=async function(e){return(0,R.submitRequestToBackground)("handleSnapRequest",[e])},n.hideAccountBanner=function(){return(0,R.submitRequestToBackground)("setShowAccountBanner",[!1])},n.hideAlert=function(){return{type:C.ALERT_CLOSE}},n.hideBetaHeader=function(){return(0,R.submitRequestToBackground)("setShowBetaHeader",[!1])},n.hideDeprecatedNetworkModal=function(){return{type:C.DEPRECATED_NETWORK_POPOVER_CLOSE}},n.hideImportNftsModal=function(){return{type:C.IMPORT_NFTS_MODAL_CLOSE}},n.hideImportTokensModal=function(){return{type:C.IMPORT_TOKENS_POPOVER_CLOSE}},n.hideIpfsModal=function(){return{type:C.SHOW_IPFS_MODAL_CLOSE}},n.hideKeyringRemovalResultModal=function(){return{type:C.HIDE_KEYRING_SNAP_REMOVAL_RESULT}},n.hideLoadingIndication=te,n.hideModal=function(){return{type:C.MODAL_CLOSE}},n.hideNetworkBanner=function(){return(0,R.submitRequestToBackground)("setShowNetworkBanner",[!1])},n.hideNetworkDropdown=function(){return{type:C.NETWORK_DROPDOWN_CLOSE}},n.hideNftStillFetchingIndication=ne,n.hidePermissionsTour=function(){return(0,R.submitRequestToBackground)("setShowPermissionsTour",[!1])},n.hidePermittedNetworkToast=function(){return{type:C.SHOW_PERMITTED_NETWORK_TOAST_CLOSE}},n.hideTestNetMessage=function(){return(0,R.submitRequestToBackground)("setShowTestnetMessageInDropdown",[!1])},n.hideWarning=function(){return{type:C.HIDE_WARNING}},n.ignoreTokens=function({tokensToIgnore:e,dontShowLoadingIndicator:t=!1,networkClientId:n=null}){const a=Array.isArray(e)?e:[e];return async e=>{t||e(J());try{await(0,R.submitRequestToBackground)("ignoreTokens",[a,n])}catch(t){(0,O.logErrorWithMessage)(t),e(ae(t))}finally{await ie(e),e(te())}}},n.importNewAccount=function(e,t,n){return async r=>{r(J(n));try{a.default.debug("background.importAccountWithStrategy"),await(0,R.submitRequestToBackground)("importAccountWithStrategy",[e,t])}finally{r(te())}return await ie(r)}},n.isNftOwner=async function(e,t,n){return await(0,R.submitRequestToBackground)("isNftOwner",[e,t,n])},n.lockMetamask=function(){return a.default.debug("background.setLocked"),e=>(e(J()),j().then((()=>ie(e))).catch((t=>(e(ae((0,O.getErrorMessage)(t))),Promise.reject(t)))).then((()=>{e(te()),e({type:C.LOCK_METAMASK})})).catch((()=>{e(te()),e({type:C.LOCK_METAMASK})})))},n.markMetamaskNotificationsAsRead=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("markMetamaskNotificationsAsRead",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.markPasswordForgotten=function(){return async e=>{try{await new Promise(((e,t)=>{(0,R.callBackgroundMethod)("markPasswordForgotten",[],(n=>{n?t(n):e()}))}))}finally{e(te()),await ie(e)}}},n.performSignIn=function(){return async()=>{try{await(0,R.submitRequestToBackground)("performSignIn")}catch(e){const t=e instanceof Error?e.message:"Unknown error occurred during sign-in.";throw(0,O.logErrorWithMessage)(t),e}}},n.performSignOut=function(){return async()=>{try{await(0,R.submitRequestToBackground)("performSignOut")}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.qrCodeDetected=function(e){return async t=>{await t({type:C.QR_CODE_DETECTED,value:e}),t((0,E.computeEstimatedGasLimit)())}},n.rejectAllApprovals=function(){return async e=>{await(0,R.submitRequestToBackground)("rejectAllPendingApprovals");const{pendingApprovals:t}=await ie(e);0===Object.values(t).length&&e(Z())}},n.rejectAllMessages=function(e){return async t=>{const n=(0,s.serializeError)(s.providerErrors.userRejectedRequest());await Promise.all(e.map((async({id:e})=>await(0,R.submitRequestToBackground)("rejectPendingApproval",[e,n]))));const{pendingApprovals:a}=await ie(t);0===Object.values(a).length&&t(Z())}},n.rejectPendingApproval=function(e,t){return async n=>{await(0,R.submitRequestToBackground)("rejectPendingApproval",[e,t]);const{pendingApprovals:a}=await ie(n);0===Object.values(a).length&&n(Z())}},n.rejectPermissionsRequest=function(e){return t=>new Promise(((n,a)=>{(0,R.callBackgroundMethod)("rejectPermissionsRequest",[e],(e=>{if(e)return t(ae(e)),void a(e);ie(t).then(n).catch(a)}))}))},n.removeAccount=function(e){return async t=>{t(J());try{await new Promise(((t,n)=>{(0,R.callBackgroundMethod)("removeAccount",[e],((e,a)=>{e?n(e):t(a)}))})),await ie(t)}catch(e){throw t(ae(e)),e}finally{t(te())}a.default.info(`Account removed: ${e}`),t(Y())}},n.removeAndIgnoreNft=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot ignore NFT without address");if(!t)throw new Error("MetaMask - Cannot ignore NFT without tokenID");n||a(J());try{await(0,R.submitRequestToBackground)("removeAndIgnoreNft",[e,t])}catch(e){throw(0,O.logErrorWithMessage)(e),a(ae(e)),e}finally{await ie(a),a(te())}}},n.removeFromAddressBook=function(e,t){return a.default.debug("background.removeFromAddressBook"),async n=>{await(0,R.submitRequestToBackground)("removeFromAddressBook",[e,(0,_.toChecksumHexAddress)(t)]),await ie(n)}},n.removeNetwork=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("removeNetwork",[e])}catch(e){(0,O.logErrorWithMessage)(e)}}},n.removeNft=function(e,t,n){return async a=>{if(!e)throw new Error("MetaMask - Cannot remove NFT without address");if(!t)throw new Error("MetaMask - Cannot remove NFT without tokenID");n||a(J());try{await(0,R.submitRequestToBackground)("removeNft",[e,t])}catch(e){(0,O.logErrorWithMessage)(e),a(ae(e))}finally{await ie(a),a(te())}}},n.removePermissionsFor=function(e){return t=>{(0,R.callBackgroundMethod)("removePermissionsFor",[e],(e=>{e&&t(ae(e))}))}},n.removePermittedAccount=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,R.callBackgroundMethod)("removePermittedAccount",[e,t],(e=>{e?a(e):n()}))})),await ie(n)}},n.removePermittedChain=function(e,t){return async n=>{await new Promise(((n,a)=>{(0,R.callBackgroundMethod)("removePermittedChain",[e,t],(e=>{e?a(e):n()}))})),await ie(n)}},n.removePollingTokenFromAppState=Se,n.removeSlide=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("removeSlide",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.removeSnap=function(e){return async(t,n)=>{var a;t(J());const r=(null===(a=(0,T.getPermissionSubjects)(n())[e])||void 0===a||null===(a=a.permissions)||void 0===a?void 0:a.snap_manageAccounts)!==undefined;try{if(r){const t=await(0,R.submitRequestToBackground)("getAccountsBySnapId",[e]);for(const e of t)await(0,R.submitRequestToBackground)("removeAccount",[e])}await(0,R.submitRequestToBackground)("removeSnap",[e]),await ie(t)}catch(e){throw t(ae(e)),e}finally{t(te())}}},n.requestAccountsAndChainPermissionsWithId=function(e){return async t=>{const n=await(0,R.submitRequestToBackground)("requestAccountsAndChainPermissionsWithId",[e]);return await ie(t),n}},n.requestRevealSeedWords=function(e){return async t=>{t(J()),a.default.debug("background.verifyPassword");try{await B(e);return await L(e)}finally{t(te())}}},n.requestUserApproval=function({origin:e,type:t,requestData:n}){return async a=>{try{await(0,R.submitRequestToBackground)("requestUserApproval",[{origin:e,type:t,requestData:n}])}catch(e){(0,O.logErrorWithMessage)(e),a(ae("Had trouble requesting user approval"))}}},n.resetAccount=function(){return e=>(e(J()),new Promise(((t,n)=>{(0,R.callBackgroundMethod)("resetAccount",[],((r,o)=>{if(e(te()),r)return(0,O.isErrorWithMessage)(r)&&e(ae(r)),void n(r);a.default.info(`Transaction history reset for ${o}`),e(Y()),t(o)}))})))},n.resetBackgroundSwapsState=function(){return async e=>{await(0,R.submitRequestToBackground)("resetSwapsState"),await ie(e)}},n.resetOnboarding=function(){return async e=>{try{await e(de(!1)),e(se())}catch(e){console.error(e)}}},n.resetOnboardingAction=se,n.resetSwapsPostFetchState=function(){return async e=>{await(0,R.submitRequestToBackground)("resetPostFetchState"),await ie(e)}},n.resetViewedNotifications=function(){return(0,R.submitRequestToBackground)("resetViewedNotifications")},n.resolvePendingApproval=function(e,t){return async n=>{await(0,R.submitRequestToBackground)("resolvePendingApproval",[e,t]);const{pendingApprovals:a}=await ie(n);0===Object.values(a).length&&n(Z())}},n.restoreUserData=async function(e){try{await(0,R.submitRequestToBackground)("restoreUserData",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}return!0},n.revokeDynamicSnapPermissions=function(e,t){return async n=>{await(0,R.submitRequestToBackground)("revokeDynamicSnapPermissions",[e,t]),await ie(n)}},n.rollbackToPreviousProvider=function(){return async e=>{try{await(0,R.submitRequestToBackground)("rollbackToPreviousProvider")}catch(t){(0,O.logErrorWithMessage)(t),e(ae("Had a problem changing networks!"))}}},n.safeRefetchQuotes=function(){return async e=>{await(0,R.submitRequestToBackground)("safeRefetchQuotes"),await ie(e)}},n.setAccountDetailsAddress=function(e){return{type:C.SET_ACCOUNT_DETAILS_ADDRESS,payload:e}},n.setAccountLabel=function(e,t){return n=>(n(J()),a.default.debug("background.setAccountLabel"),new Promise(((a,r)=>{(0,R.callBackgroundMethod)("setAccountLabel",[e,t],(o=>{if(n(te()),o)return n(ae(o)),void r(o);n({type:C.SET_ACCOUNT_LABEL,value:{account:e,label:t}}),a(e)}))})))},n.setActiveNetwork=function(e){return async t=>{a.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,R.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){(0,O.logErrorWithMessage)(e),t(ae("Had a problem changing networks!"))}}},n.setActiveNetworkConfigurationId=$,n.setActiveNetworkWithError=function(e){return async t=>{a.default.debug(`background.setActiveNetwork: ${e}`);try{await(0,R.submitRequestToBackground)("setActiveNetwork",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),t(ae("Had a problem changing networks!")),new Error("Had a problem changing networks!")}}},n.setAddSnapAccountEnabled=async function(e){try{await(0,R.submitRequestToBackground)("setAddSnapAccountEnabled",[e])}catch(e){(0,O.logErrorWithMessage)(e)}},n.setAdvancedGasFee=function(e){return t=>{t(J()),a.default.debug("background.setAdvancedGasFee"),(0,R.callBackgroundMethod)("setAdvancedGasFee",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setAggregatedBalancePopoverShown=function(){return re("shouldShowAggregatedBalancePopover",!1)},n.setAlertEnabledness=async function(e,t){await(0,R.submitRequestToBackground)("setAlertEnabledness",[e,t])},n.setAutoLockTimeLimit=function(e){return re("autoLockTimeLimit",e)},n.setBackgroundSwapRouteState=function(e){return async t=>{await(0,R.submitRequestToBackground)("setBackgroundSwapRouteState",[e]),await ie(t)}},n.setCompletedOnboarding=function(){return async e=>{e(J());try{await(0,R.submitRequestToBackground)("completeOnboarding"),e(oe())}catch(t){throw e(ae(t)),t}finally{e(te())}}},n.setConfirmationAdvancedDetailsOpen=function(e){return re("showConfirmationAdvancedDetails",e)},n.setConfirmationExchangeRates=function(e){return{type:C.SET_CONFIRMATION_EXCHANGE_RATES,value:e}},n.setConnectedStatusPopoverHasBeenShown=function(){return()=>{(0,R.callBackgroundMethod)("setConnectedStatusPopoverHasBeenShown",[],(e=>{if((0,O.isErrorWithMessage)(e))throw new Error((0,O.getErrorMessage)(e))}))}},n.setCurrentCurrency=function(e){return async t=>{t(J()),a.default.debug("background.setCurrentCurrency");try{await(0,R.submitRequestToBackground)("setCurrentCurrency",[e]),await ie(t)}catch(e){return(0,O.logErrorWithMessage)(e),void t(ae(e))}finally{t(te())}}},n.setCurrentExtensionPopupId=function(e){return async t=>{await(0,R.submitRequestToBackground)("setCurrentExtensionPopupId",[e]),await ie(t)}},n.setCurrentLocale=ue,n.setCustomApproveTxData=function(e){return async t=>{await(0,R.submitRequestToBackground)("setCustomApproveTxData",[e]),await ie(t)}},n.setDataCollectionForMarketing=function(e){return async t=>{a.default.debug("background.setDataCollectionForMarketing"),await(0,R.submitRequestToBackground)("setDataCollectionForMarketing",[e]),t({type:C.SET_DATA_COLLECTION_FOR_MARKETING,value:e})}},n.setDefaultHomeActiveTabName=function(e){return async t=>{await(0,R.submitRequestToBackground)("setDefaultHomeActiveTabName",[e]),await ie(t)}},n.setDismissSeedBackUpReminder=function(e){return async t=>{t(J()),await(0,R.submitRequestToBackground)("setDismissSeedBackUpReminder",[e]),t(te())}},n.setEditedNetwork=function(e=undefined){return{type:C.SET_EDIT_NETWORK,payload:e}},n.setFeatureAnnouncementsEnabled=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("setFeatureAnnouncementsEnabled",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.setFeatureFlag=function(e,t,n){return a=>(a(J()),new Promise(((r,o)=>{(0,R.callBackgroundMethod)("setFeatureFlag",[e,t],((e,t)=>{if(a(te()),e)return a(ae(e)),void o(e);n&&a(X({name:n})),r(t)}))})))},n.setFeatureNotificationsEnabled=function(e){return re("featureNotificationsEnabled",e)},n.setFirstTimeFlowType=function(e){return async t=>{try{a.default.debug("background.setFirstTimeFlowType"),await(0,R.submitRequestToBackground)("setFirstTimeFlowType",[e]),t({type:C.SET_FIRST_TIME_FLOW_TYPE,value:e})}catch(e){t(ae(e))}}},n.setHardwareWalletDefaultHdPath=function({device:e,path:t}){return{type:C.SET_HARDWARE_WALLET_DEFAULT_HD_PATH,payload:{device:e,path:t}}},n.setHideZeroBalanceTokens=function(e){return re("hideZeroBalanceTokens",e)},n.setIncomingTransactionsPreferences=function(e,t){return async n=>{n(J()),a.default.debug("background.setIncomingTransactionsPreferences"),await(0,R.submitRequestToBackground)("setIncomingTransactionsPreferences",[e,t]),n(te())}},n.setInitialGasEstimate=function(e){return async t=>{await(0,R.submitRequestToBackground)("setInitialGasEstimate",[e]),await ie(t)}},n.setIpfsGateway=function(e){return t=>{a.default.debug("background.setIpfsGateway"),(0,R.callBackgroundMethod)("setIpfsGateway",[e],(e=>{e&&t(ae(e))}))}},n.setIsIpfsGatewayEnabled=function(e){return t=>{a.default.debug("background.setIsIpfsGatewayEnabled"),(0,R.callBackgroundMethod)("setIsIpfsGatewayEnabled",[e],(e=>{e&&t(ae(e))}))}},n.setLastActiveTime=function(){return e=>{(0,R.callBackgroundMethod)("setLastActiveTime",[],(t=>{t&&e(ae(t))}))}},n.setLastInteractedConfirmationInfo=async function(e){return await(0,R.submitRequestToBackground)("setLastInteractedConfirmationInfo",[e])},n.setLastViewedUserSurvey=function(e){return async()=>{await(0,R.submitRequestToBackground)("setLastViewedUserSurvey",[e])}},n.setName=function(e){return async()=>{await(0,R.submitRequestToBackground)("setName",[e])}},n.setNetworkClientIdForDomain=function(e,t){return(0,R.submitRequestToBackground)("setNetworkClientIdForDomain",[e,t])},n.setNewNetworkAdded=function({networkConfigurationId:e,nickname:t}){return{type:C.SET_NEW_NETWORK_ADDED,payload:{networkConfigurationId:e,nickname:t}}},n.setNewNftAddedMessage=function(e){return{type:C.SET_NEW_NFT_ADDED_MESSAGE,payload:e}},n.setNewTokensImported=function(e){return{type:C.SET_NEW_TOKENS_IMPORTED,payload:e}},n.setNewTokensImportedError=function(e){return{type:C.SET_NEW_TOKENS_IMPORTED_ERROR,payload:e}},n.setNextNonce=le,n.setOpenMetamaskTabsIDs=ge,n.setOpenSeaEnabled=function(e){return async t=>{t(J()),a.default.debug("background.setOpenSeaEnabled");try{await(0,R.submitRequestToBackground)("setOpenSeaEnabled",[e])}finally{t(te())}}},n.setOutdatedBrowserWarningLastShown=function(e){return async()=>{await(0,R.submitRequestToBackground)("setOutdatedBrowserWarningLastShown",[e])}},n.setOverrideContentSecurityPolicyHeader=function(e){return async t=>{t(J()),await(0,R.submitRequestToBackground)("setOverrideContentSecurityPolicyHeader",[e]),t(te())}},n.setParticipateInMetaMetrics=function(e){return t=>(a.default.debug("background.setParticipateInMetaMetrics"),new Promise(((n,r)=>{(0,R.callBackgroundMethod)("setParticipateInMetaMetrics",[e],((o,s)=>{if(a.default.debug(o),o)return t(ae(o)),void r(o);t({type:C.SET_PARTICIPATE_IN_METAMETRICS,value:e}),n([e,s])}))})))},n.setPendingTokens=function(e){const{customToken:t,selectedTokens:n={},tokenAddressList:a=[]}=e,r=null!=t&&t.address&&null!=t&&t.symbol&&Boolean((null==t?void 0:t.decimals)>=0&&(null==t?void 0:t.decimals)<=36)?{...n,[t.address]:{...t,isCustom:!0}}:n;return Object.keys(r).forEach((e=>{const t=a.find((t=>(0,N.isEqualCaseInsensitive)(t,e)));r[e]={...r[e],unlisted:!t}})),{type:C.SET_PENDING_TOKENS,payload:r}},n.setPetnamesEnabled=function(e){return re("petnamesEnabled",e)},n.setPreference=re,n.setPrivacyMode=function(e){return re("privacyMode",e,!1)},n.setRecoveryPhraseReminderHasBeenShown=function(){return()=>{(0,R.callBackgroundMethod)("setRecoveryPhraseReminderHasBeenShown",[],(e=>{if((0,O.isErrorWithMessage)(e))throw new Error((0,O.getErrorMessage)(e))}))}},n.setRecoveryPhraseReminderLastShown=function(e){return()=>{(0,R.callBackgroundMethod)("setRecoveryPhraseReminderLastShown",[e],(e=>{if((0,O.isErrorWithMessage)(e))throw new Error((0,O.getErrorMessage)(e))}))}},n.setRemoveNftMessage=function(e){return{type:C.SET_REMOVE_NFT_MESSAGE,payload:e}},n.setRequestAccountTabIds=Te,n.setSecurityAlertsEnabled=function(e){try{(0,R.submitRequestToBackground)("setSecurityAlertsEnabled",[e])}catch(e){(0,O.logErrorWithMessage)(e)}},n.setSeedPhraseBackedUp=de,n.setSelectedAccount=function(e){return async(t,n)=>{t(J()),a.default.debug("background.setSelectedAccount");const r=n(),o=(0,m.getUnconnectedAccountAlertEnabledness)(r),s=r.activeTab.origin,i=(0,T.getInternalAccountByAddress)(r,e),c=(0,T.getPermittedAccountsForCurrentTab)(r),u=Boolean(s)&&c.includes(i.address),d=Boolean(s)&&c.includes(e),l=u&&!d;try{await V(i.id),await ie(t)}catch(e){return void t(ae(e))}finally{t(te())}o&&l&&(t((0,S.switchedToUnconnectedAccount)()),await Ae(s))}},n.setSelectedInternalAccount=function(e){return async t=>{t(J()),a.default.debug("background.setSelectedInternalAccount");try{await V(e)}catch(e){return void t(ae(e))}finally{t(te())}}},n.setSelectedNetworkConfigurationId=function(e){return{type:C.SET_SELECTED_NETWORK_CONFIGURATION_ID,payload:e}},n.setSelectedQuoteAggId=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSelectedQuoteAggId",[e]),await ie(t)}},n.setServiceWorkerKeepAlivePreference=function(e){return async t=>{t(J()),a.default.debug("background.setServiceWorkerKeepAlivePreference");try{await(0,R.submitRequestToBackground)("setServiceWorkerKeepAlivePreference",[e])}catch(e){t(ae(e))}finally{t(te())}}},n.setShowExtensionInFullSizeView=function(e){return re("showExtensionInFullSizeView",e)},n.setShowFiatConversionOnTestnetsPreference=function(e){return re("showFiatInTestnets",e)},n.setShowMultiRpcModal=function(e){return re("showMultiRpcModal",e)},n.setShowNativeTokenAsMainBalancePreference=function(e){return re("showNativeTokenAsMainBalance",e)},n.setShowTestNetworks=function(e){return re("showTestNetworks",e)},n.setSlides=function(e){return{type:C.SET_SLIDES,slides:e}},n.setSmartTransactionsPreferenceEnabled=function(e){return async(t,n)=>{const a=(0,I.getSmartTransactionsOptInStatusInternal)(n());_e({category:p.MetaMetricsEventCategory.Settings,event:p.MetaMetricsEventName.SettingsUpdated,properties:{stx_opt_in:e,prev_stx_opt_in:a}}),await t(re("smartTransactionsOptInStatus",e)),await ie(t)}},n.setSmartTransactionsRefreshInterval=function(e){return async()=>{if(e!==undefined&&null!==e)try{await(0,R.submitRequestToBackground)("setStatusRefreshInterval",[e])}catch(e){(0,O.logErrorWithMessage)(e)}}},n.setSnapsAddSnapAccountModalDismissed=async function(){await(0,R.submitRequestToBackground)("setSnapsAddSnapAccountModalDismissed",[!0])},n.setSnapsInstallPrivacyWarningShownStatus=function(e){return async()=>{await(0,R.submitRequestToBackground)("setSnapsInstallPrivacyWarningShownStatus",[e])}},n.setSwapsErrorKey=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsErrorKey",[e]),await ie(t)}},n.setSwapsFeatureFlags=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsFeatureFlags",[e]),await ie(t)}},n.setSwapsLiveness=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsLiveness",[e]),await ie(t)}},n.setSwapsQuotesPollingLimitEnabled=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsQuotesPollingLimitEnabled",[e]),await ie(t)}},n.setSwapsTokens=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsTokens",[e]),await ie(t)}},n.setSwapsTxGasLimit=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsTxGasLimit",[e,!0]),await ie(t)}},n.setSwapsTxGasPrice=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsTxGasPrice",[e]),await ie(t)}},n.setSwitchedNetworkDetails=z,n.setTermsOfUseLastAgreed=function(e){return async()=>{await(0,R.submitRequestToBackground)("setTermsOfUseLastAgreed",[e])}},n.setTheme=function(e){return async t=>{t(J()),a.default.debug("background.setTheme");try{await(0,R.submitRequestToBackground)("setTheme",[e])}finally{t(te())}}},n.setTokenNetworkFilter=function(e){return re("tokenNetworkFilter",e,!1)},n.setTokenSortConfig=function(e){return re("tokenSortConfig",e,!1)},n.setUnconnectedAccountAlertShown=Ae,n.setUse4ByteResolution=function(e){return async t=>{t(J()),a.default.debug("background.setUse4ByteResolution");try{await(0,R.submitRequestToBackground)("setUse4ByteResolution",[e])}catch(e){t(ae(e))}finally{t(te())}}},n.setUseAddressBarEnsResolution=function(e){return t=>{a.default.debug("background.setUseAddressBarEnsResolution"),(0,R.callBackgroundMethod)("setUseAddressBarEnsResolution",[e],(e=>{e&&t(ae(e))}))}},n.setUseBlockie=function(e){return t=>{t(J()),a.default.debug("background.setUseBlockie"),(0,R.callBackgroundMethod)("setUseBlockie",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setUseCurrencyRateCheck=function(e){return t=>{t(J()),a.default.debug("background.setUseCurrencyRateCheck"),(0,R.callBackgroundMethod)("setUseCurrencyRateCheck",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setUseExternalNameSources=function(e){try{(0,R.submitRequestToBackground)("setUseExternalNameSources",[e])}catch(e){(0,O.logErrorWithMessage)(e)}},n.setUseMultiAccountBalanceChecker=function(e){return t=>{t(J()),a.default.debug("background.setUseMultiAccountBalanceChecker"),(0,R.callBackgroundMethod)("setUseMultiAccountBalanceChecker",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setUseNftDetection=function(e){return async t=>{t(J()),a.default.debug("background.setUseNftDetection");try{await(0,R.submitRequestToBackground)("setUseNftDetection",[e])}finally{t(te())}}},n.setUsePhishDetect=function(e){return t=>{t(J()),a.default.debug("background.setUsePhishDetect"),(0,R.callBackgroundMethod)("setUsePhishDetect",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setUseSafeChainsListValidation=function(e){return t=>{t(J()),a.default.debug("background.setUseSafeChainsListValidation"),(0,R.callBackgroundMethod)("setUseSafeChainsListValidation",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setUseTokenDetection=function(e){return t=>{t(J()),a.default.debug("background.setUseTokenDetection"),(0,R.callBackgroundMethod)("setUseTokenDetection",[e],(e=>{t(te()),e&&t(ae(e))}))}},n.setUseTransactionSimulations=function(e){try{(0,R.submitRequestToBackground)("setUseTransactionSimulations",[e])}catch(e){(0,O.logErrorWithMessage)(e)}},n.setWatchEthereumAccountEnabled=async function(e){try{await(0,R.submitRequestToBackground)("setWatchEthereumAccountEnabled",[e])}catch(e){(0,O.logErrorWithMessage)(e)}},n.setWeb3ShimUsageAlertDismissed=async function(e){await(0,R.submitRequestToBackground)("setWeb3ShimUsageAlertDismissed",[e])},n.showAccountsPage=Y,n.showAlert=function(e){return{type:C.ALERT_OPEN,payload:e}},n.showConfTxPage=Q,n.showConfirmTurnOffProfileSyncing=function(){return e=>{e(X({name:"CONFIRM_TURN_OFF_PROFILE_SYNCING"}))}},n.showConfirmTurnOnMetamaskNotifications=function(){return e=>{e(X({name:"TURN_ON_METAMASK_NOTIFICATIONS"}))}},n.showDeprecatedNetworkModal=function(){return{type:C.DEPRECATED_NETWORK_POPOVER_OPEN}},n.showImportNftsModal=function(e){return{type:C.IMPORT_NFTS_MODAL_OPEN,payload:e}},n.showImportTokensModal=function(){return{type:C.IMPORT_TOKENS_POPOVER_OPEN}},n.showIpfsModal=function(){return{type:C.SHOW_IPFS_MODAL_OPEN}},n.showKeyringSnapRemovalModal=function(e){return{type:C.SHOW_KEYRING_SNAP_REMOVAL_RESULT,payload:e}},n.showLoadingIndication=J,n.showModal=X,n.showNetworkDropdown=function(){return{type:C.NETWORK_DROPDOWN_OPEN}},n.showNftStillFetchingIndication=ee,n.showPermittedNetworkToast=function(){return{type:C.SHOW_PERMITTED_NETWORK_TOAST_OPEN}},n.showPrivateKey=function(e){return{type:C.SHOW_PRIVATE_KEY,payload:e}},n.showQrScanner=function(){return e=>{e(X({name:"QR_SCANNER"}))}},n.showSendTokenPage=function(){return{type:C.SHOW_SEND_TOKEN_PAGE}},n.signAndSendSmartTransaction=function({unsignedTransaction:e,smartTransactionFees:t}){return async n=>{const a=await pe(e,t.fees);try{return(await(0,R.submitRequestToBackground)("submitSignedTransactions",[{signedTransactions:a,signedCanceledTransactions:[],txParams:e}])).uuid}catch(e){if((0,O.logErrorWithMessage)(e),(0,O.isErrorWithMessage)(e)){const t=(0,O.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,f.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.stopPollingForQuotes=function(){return async e=>{await(0,R.submitRequestToBackground)("stopPollingForQuotes"),await ie(e)}},n.submitPassword=b,n.submitQRHardwareCryptoAccount=async function(e){await(0,R.submitRequestToBackground)("submitQRHardwareCryptoAccount",[e])},n.submitQRHardwareCryptoHDKey=async function(e){await(0,R.submitRequestToBackground)("submitQRHardwareCryptoHDKey",[e])},n.submitQRHardwareSignature=async function(e,t){await(0,R.submitRequestToBackground)("submitQRHardwareSignature",[e,t])},n.syncInternalAccountsWithUserStorage=function(){return async()=>{try{return await(0,R.submitRequestToBackground)("syncInternalAccountsWithUserStorage")}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.throwTestBackgroundError=async function(e){await(0,R.submitRequestToBackground)("throwTestError",[e])},n.toggleAccountMenu=function(){return{type:C.TOGGLE_ACCOUNT_MENU}},n.toggleExternalServices=function(e){return async t=>{a.default.debug("background.toggleExternalServices");try{await(0,R.submitRequestToBackground)("toggleExternalServices",[e]),await ie(t)}catch(e){t(ae(e))}}},n.toggleNetworkMenu=function(e){return{type:C.TOGGLE_NETWORK_MENU,payload:e}},n.tokenBalancesStartPolling=async function(e){const t=await(0,R.submitRequestToBackground)("tokenBalancesStartPolling",[{chainId:e}]);return await Ee(t),t},n.tokenBalancesStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("tokenBalancesStopPollingByPollingToken",[e]),await Se(e)},n.tokenDetectionStartPolling=async function(e){const t=await(0,R.submitRequestToBackground)("tokenDetectionStartPolling",[{chainIds:e}]);return await Ee(t),t},n.tokenDetectionStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("tokenDetectionStopPollingByPollingToken",[e]),await Se(e)},n.tokenListStartPolling=async function(e){const t=await(0,R.submitRequestToBackground)("tokenListStartPolling",[{chainId:e}]);return await Ee(t),t},n.tokenListStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("tokenListStopPollingByPollingToken",[e]),await Se(e)},n.tokenRatesStartPolling=async function(e){const t=await(0,R.submitRequestToBackground)("tokenRatesStartPolling",[{chainId:e}]);return await Ee(t),t},n.tokenRatesStopPollingByPollingToken=async function(e){await(0,R.submitRequestToBackground)("tokenRatesStopPollingByPollingToken",[e]),await Se(e)},n.trackInsightSnapUsage=function(e){return async()=>{await(0,R.submitRequestToBackground)("trackInsightSnapView",[e])}},n.trackMetaMetricsEvent=_e,n.trackMetaMetricsPage=function(e,t){return(0,R.submitRequestToBackground)("trackMetaMetricsPage",[{...e,actionId:(0,R.generateActionId)()},t])},n.tryReverseResolveAddress=function(e){return()=>new Promise((t=>{(0,R.callBackgroundMethod)("tryReverseResolveAddress",[e],(e=>{e&&(0,O.logErrorWithMessage)(e),t()}))}))},n.tryUnlockMetamask=function(e){return t=>(t(J()),t(F()),a.default.debug("background.submitPassword"),new Promise(((t,n)=>{(0,R.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))})).then((()=>(t(K()),ie(t)))).then((()=>{t(te())})).catch((e=>(t(G((0,O.getErrorMessage)(e))),t(te()),Promise.reject(e)))))},n.unMarkPasswordForgotten=H,n.unlockAndGetSeedPhrase=function(e){return async t=>{t(J());try{await b(e);const n=await L(e);return await ie(t),n}catch(e){throw t(ae(e)),(0,O.isErrorWithMessage)(e)?new Error((0,O.getErrorMessage)(e)):e}finally{t(te())}}},n.unlockFailed=G,n.unlockHardwareWalletAccounts=function(e,t,n,r){return a.default.debug("background.unlockHardwareWalletAccount",e,t,n,r),async a=>{a(J());for(const o of e)try{await(0,R.submitRequestToBackground)("unlockHardwareWalletAccount",[o,t,n,r])}catch(e){throw(0,O.logErrorWithMessage)(e),a(ae(e)),a(te()),e}return a(te()),undefined}},n.unlockInProgress=F,n.unlockSucceeded=K,n.updateAccountsList=function(e){return async()=>{await(0,R.submitRequestToBackground)("updateAccountsList",[e])}},n.updateAndApproveTx=function(e,t,n){return(a,r)=>{!t&&a(J(n));const o=()=>Boolean(r().send.stage!==E.SEND_STAGES.INACTIVE);return new Promise(((t,n)=>{const r=(0,R.generateActionId)();(0,R.callBackgroundMethod)("resolvePendingApproval",[String(e.id),{txMeta:e,actionId:r},{waitForResult:!0}],(r=>{if(a(q(e.id,e.txParams)),o()||a((0,E.resetSendState)()),r)return a(P()),(0,O.logErrorWithMessage)(r),void n(r);t(e)}))})).then((()=>ie(a))).then((()=>(o()||a((0,E.resetSendState)()),a(W(e.id)),a(te()),a(U("")),a(Z()),e))).catch((e=>(a(te()),Promise.reject(e))))}},n.updateCurrentLocale=ce,n.updateCustomNonce=U,n.updateCustomSwapsEIP1559GasParams=function({gasLimit:e,maxFeePerGas:t,maxPriorityFeePerGas:n}){return async a=>{await Promise.all([(0,R.submitRequestToBackground)("setSwapsTxGasLimit",[e]),(0,R.submitRequestToBackground)("setSwapsTxMaxFeePerGas",[t]),(0,R.submitRequestToBackground)("setSwapsTxMaxFeePriorityPerGas",[n])]),await ie(a)}},n.updateDataDeletionTaskStatus=async function(){return await(0,R.submitRequestToBackground)("updateDataDeletionTaskStatus")},n.updateEditableParams=function(e,t){return async n=>{let a;try{a=await(0,R.submitRequestToBackground)("updateEditableParams",[e,t])}catch(e){throw(0,O.logErrorWithMessage)(e),e}return await ie(n),a}},n.updateEventFragment=function(e,t){return(0,R.submitRequestToBackground)("updateEventFragment",[e,t])},n.updateHiddenAccountsList=function(e){return async()=>{await(0,R.submitRequestToBackground)("updateHiddenAccountsList",[e])}},n.updateInterfaceState=function(e,t){return async n=>{await(0,R.submitRequestToBackground)("updateInterfaceState",[e,t]),await ie(n)}},n.updateMetamaskState=x,n.updateNetwork=function(e,t={}){return async n=>{a.default.debug("background.updateNetwork",e);try{return await(0,R.submitRequestToBackground)("updateNetwork",[e.chainId,e,t])}catch(e){(0,O.logErrorWithMessage)(e),n(ae("Had a problem updading networks!"))}return undefined}},n.updateNetworksList=function(e){return async()=>{await(0,R.submitRequestToBackground)("updateNetworksList",[e])}},n.updateNftDropDownState=function(e){return async t=>{await(0,R.submitRequestToBackground)("updateNftDropDownState",[e]),await ie(t)}},n.updateOnChainTriggersByAccount=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("updateOnChainTriggersByAccount",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.updatePreviousGasParams=function(e,t){return async()=>{let n;try{n=await(0,R.submitRequestToBackground)("updatePreviousGasParams",[e,t])}catch(e){throw(0,O.logErrorWithMessage)(e),e}return n}},n.updateProposedNames=function(e){return async()=>await(0,R.submitRequestToBackground)("updateProposedNames",[e])},n.updateSlides=function(e){return async()=>{try{await(0,R.submitRequestToBackground)("updateSlides",[e])}catch(e){throw(0,O.logErrorWithMessage)(e),e}}},n.updateSmartTransaction=function(e,t){return async n=>{try{await(0,R.submitRequestToBackground)("updateSmartTransaction",[{uuid:e,...t}])}catch(e){if((0,O.logErrorWithMessage)(e),(0,O.isErrorWithMessage)(e)){const t=(0,O.getErrorMessage)(e);if(t.startsWith("Fetch error:")){const e=(0,f.parseSmartTransactionsError)(t);n({type:C.SET_SMART_TRANSACTIONS_ERROR,payload:e})}}throw e}}},n.updateSnap=function(e,t){return async(n,a)=>{await(0,R.submitRequestToBackground)("updateSnap",[e,t]),await ie(n);const r=a(),o=(0,T.getFirstSnapInstallOrUpdateRequest)(r);return null==o?void 0:o.metadata.id}},n.updateSwapsUserFeeLevel=function(e){return async t=>{await(0,R.submitRequestToBackground)("setSwapsUserFeeLevel",[e]),await ie(t)}},n.updateThrottledOriginState=async function(e,t){await(0,R.submitRequestToBackground)("updateThrottledOriginState",[e,t])},n.updateTokenType=async function(e){try{return await(0,R.submitRequestToBackground)("updateTokenType",[e])}catch(e){(0,O.logErrorWithMessage)(e)}return undefined},n.updateTransaction=function(e,t){return async n=>{!t&&n(J());try{await(0,R.submitRequestToBackground)("updateTransaction",[e])}catch(t){throw n(q(e.id,e.txParams)),n(te()),n(P()),(0,O.logErrorWithMessage)(t),t}try{return n(q(e.id,e.txParams)),await ie(n),n(Q({id:e.id})),e}finally{n(te())}}},n.updateTransactionGasFees=function(e,t){return async()=>{let n;try{n=await(0,R.submitRequestToBackground)("updateTransactionGasFees",[e,t])}catch(e){throw(0,O.logErrorWithMessage)(e),e}return n}},n.updateTransactionParams=q,n.updateTransactionSendFlowHistory=function(e,t,n){return async()=>{let a;try{a=await(0,R.submitRequestToBackground)("updateTransactionSendFlowHistory",[e,t,n])}catch(e){throw(0,O.logErrorWithMessage)(e),e}return a}},n.updateViewedNotifications=function(e){return(0,R.submitRequestToBackground)("updateViewedNotifications",[e])},n.verifyPassword=B;var a=M(e("loglevel")),r=e("@sentry/browser"),o=e("lodash"),s=e("@metamask/rpc-errors"),i=e("@metamask/keyring-controller"),c=e("@metamask/profile-sync-controller/sdk"),u=M(e("../../shared/lib/switch-direction")),d=e("../../shared/constants/app"),l=e("../../app/scripts/lib/util"),T=e("../selectors"),g=e("../../shared/modules/selectors/networks"),E=e("../ducks/send"),S=e("../ducks/alerts/unconnected-account"),m=e("../ducks/metamask/metamask"),_=e("../../shared/modules/hexstring-utils"),A=e("../../shared/constants/hardware-wallets"),p=e("../../shared/constants/metametrics"),f=e("../pages/swaps/swaps.util"),N=e("../../shared/modules/string-utils"),I=e("../../shared/modules/selectors"),k=e("../../shared/modules/i18n"),h=e("../../shared/modules/conversion.utils"),O=e("../../shared/modules/error"),w=e("../../shared/lib/four-byte"),y=e("../helpers/constants/notifications"),C=function(e,t){if(!t&&e&&e.__esModule)return e;if(null===e||"object"!=typeof e&&"function"!=typeof e)return{default:e};var n=D(t);if(n&&n.has(e))return n.get(e);var a={__proto__:null},r=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in e)if("default"!==o&&{}.hasOwnProperty.call(e,o)){var s=r?Object.getOwnPropertyDescriptor(e,o):null;s&&(s.get||s.set)?Object.defineProperty(a,o,s):a[o]=e[o]}return a.default=e,n&&n.set(e,a),a}(e("./actionConstants")),R=e("./background-connection");function D(e){if("function"!=typeof WeakMap)return null;var t=new WeakMap,n=new WeakMap;return(D=function(e){return e?n:t})(e)}function M(e){return e&&e.__esModule?e:{default:e}}function P(){return{type:C.GO_HOME}}function b(e){return new Promise(((t,n)=>{(0,R.callBackgroundMethod)("submitPassword",[e],(e=>{e?n(e):t()}))}))}function v(e){return new Promise(((t,n)=>{(0,R.callBackgroundMethod)("createNewVaultAndKeychain",[e],(e=>{e?n(e):t(!0)}))}))}function B(e){return new Promise(((t,n)=>{(0,R.callBackgroundMethod)("verifyPassword",[e],(e=>{e?n(e):t(!0)}))}))}async function L(e){const n=await(0,R.submitRequestToBackground)("getSeedPhrase",[e]);return t.from(n).toString("utf8")}function U(e){return{type:C.UPDATE_CUSTOM_NONCE,value:e}}function W(e){return t=>{t({type:C.COMPLETED_TX,value:{id:e}})}}function q(e,t){return{type:C.UPDATE_TRANSACTION_PARAMS,id:e,value:t}}function H(){return e=>new Promise((e=>{(0,R.callBackgroundMethod)("unMarkPasswordForgotten",[],(()=>{e()}))})).then((()=>ie(e)))}function F(){return{type:C.UNLOCK_IN_PROGRESS}}function G(e){return{type:C.UNLOCK_FAILED,value:e}}function K(e){return{type:C.UNLOCK_SUCCEEDED,value:e}}function x(e){return(t,n)=>{var a,r;const s=n(),i=(0,g.getProviderConfig)(s),{metamask:c}=s;if(null==e||!e.length)return c;const u=function(e,t){const n={...e};for(const e of t){const{op:t,path:a,value:r}=e;if("replace"!==t)throw new Error(`Unsupported patch operation: ${t}`);n[a[0]]=r}return n}(c,e),{currentLocale:d}=c,l=(0,T.getSelectedInternalAccount)(s),S=null==l?void 0:l.address,{currentLocale:m}=u,_=(0,g.getProviderConfig)({metamask:u}),A=(0,T.getSelectedInternalAccount)({metamask:u}),p=null==A?void 0:A.address;d&&m&&d!==m&&t(ce(m)),S!==p&&t({type:C.SELECTED_ADDRESS_CHANGED});const f=(null===(a=u.addressBook)||void 0===a?void 0:a[null==_?void 0:_.chainId])??{},N=(null===(r=c.addressBook)||void 0===r?void 0:r[null==i?void 0:i.chainId])??{},I=(0,T.getMetaMaskAccounts)({metamask:u}),k=(0,T.getMetaMaskAccounts)({metamask:c}),h=I[p],O=I[S];return Object.entries(k).forEach((([e,n])=>{(0,o.isEqual)(n,I[e])||t({type:C.ACCOUNT_CHANGED,payload:{account:I[e]}})})),!1===(0,o.isEqual)(O,h)&&t({type:C.SELECTED_ACCOUNT_CHANGED,payload:{account:h}}),!1===(0,o.isEqual)(N,f)&&t({type:C.ADDRESS_BOOK_UPDATED,payload:{addressBook:f}}),!1===(0,o.isEqual)(c.gasFeeEstimates,u.gasFeeEstimates)&&t({type:C.GAS_FEE_ESTIMATES_UPDATED,payload:{gasFeeEstimates:u.gasFeeEstimates,gasEstimateType:u.gasEstimateType}}),t({type:C.UPDATE_METAMASK_STATE,value:u}),i.chainId!==_.chainId&&(t({type:C.CHAIN_CHANGED,payload:_.chainId}),t((0,E.initializeSendState)({chainHasChanged:!0}))),u}}const j=()=>new Promise(((e,t)=>{(0,R.callBackgroundMethod)("setLocked",[],(n=>{n?t(n):e()}))}));async function V(e){a.default.debug("background.setSelectedInternalAccount"),await(0,R.submitRequestToBackground)("setSelectedInternalAccount",[e])}function Y(){return{type:C.SHOW_ACCOUNTS_PAGE}}function Q({id:e}={}){return{type:C.SHOW_CONF_TX_PAGE,id:e}}function z(e){return async t=>{await(0,R.submitRequestToBackground)("setSwitchedNetworkDetails",[e]),await ie(t)}}async function $(e){a.default.debug(`background.setActiveNetworkConfigurationId: ${e}`),await(0,R.submitRequestToBackground)("setActiveNetworkConfigurationId",[e])}function X(e){return{type:C.MODAL_OPEN,payload:e}}function Z(){return(e,t)=>{const n=t(),a=(0,T.getApprovalFlows)(n);(0,l.getEnvironmentType)()!==d.ENVIRONMENT_TYPE_NOTIFICATION||(0,T.hasTransactionPendingApprovals)(n)||(0,T.getIsSigningQRHardwareTransaction)(n)||0!==a.length||me()}}function J(e){return{type:C.SHOW_LOADING,payload:e}}function ee(){return{type:C.SHOW_NFT_STILL_FETCHING_INDICATION}}function te(){return{type:C.HIDE_LOADING}}function ne(){return{type:C.HIDE_NFT_STILL_FETCHING_INDICATION}}function ae(e){var t;return(0,O.isErrorWithMessage)(e)?{type:C.DISPLAY_WARNING,payload:(null==e||null===(t=e.cause)||void 0===t?void 0:t.message)||e.message}:"string"==typeof e?{type:C.DISPLAY_WARNING,payload:e}:{type:C.DISPLAY_WARNING,payload:`${e}`}}function re(e,t,n=!0){return a=>(n&&a(J()),new Promise(((r,o)=>{(0,R.callBackgroundMethod)("setPreference",[e,t],((e,t)=>{if(n&&a(te()),e)return a(ae(e)),void o(e);r(t)}))})))}function oe(){return{type:C.COMPLETE_ONBOARDING}}function se(){return{type:C.RESET_ONBOARDING}}async function ie(e){let t;try{t=await(0,R.submitRequestToBackground)("getStatePatches")}catch(t){throw e(ae(t)),t}return e(x(t))}function ce(e){return async t=>{t(J());try{await(0,k.loadRelativeTimeFormatLocaleData)(e);const n=await(0,k.fetchLocale)(e),a=await(0,R.submitRequestToBackground)("setCurrentLocale",[e]);(0,u.default)(a),t(ue(e,n))}catch(e){return void t(ae(e))}finally{t(te())}}}function ue(e,t){return{type:C.SET_CURRENT_LOCALE,payload:{locale:e,messages:t}}}function de(e){return t=>(a.default.debug("background.setSeedPhraseBackedUp"),new Promise(((n,a)=>{(0,R.callBackgroundMethod)("setSeedPhraseBackedUp",[e],(e=>{if(e)return t(ae(e)),void a(e);ie(t).then(n).catch(a)}))})))}function le(e){return{type:C.SET_NEXT_NONCE,payload:e}}function Te(e){return{type:C.SET_REQUEST_ACCOUNT_TABS,payload:e}}function ge(e){return{type:C.SET_OPEN_METAMASK_TAB_IDS,payload:e}}async function Ee(e){return(0,R.submitRequestToBackground)("addPollingTokenToAppState",[e,d.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,l.getEnvironmentType)()]])}async function Se(e){return(0,R.submitRequestToBackground)("removePollingTokenFromAppState",[e,d.POLLING_TOKEN_ENVIRONMENT_TYPES[(0,l.getEnvironmentType)()]])}async function me(){await(0,R.submitRequestToBackground)("markNotificationPopupAsAutomaticallyClosed"),global.platform.closeCurrentWindow()}function _e(e,t){return(0,R.submitRequestToBackground)("trackMetaMetricsEvent",[{...e,actionId:(0,R.generateActionId)()},t])}async function Ae(e){await(0,R.submitRequestToBackground)("setUnconnectedAccountAlertShown",[e])}const pe=async(e,t,n)=>{const a=t.map((t=>{const a={...e,maxFeePerGas:(0,h.decimalToHex)(t.maxFeePerGas),maxPriorityFeePerGas:(0,h.decimalToHex)(t.maxPriorityFeePerGas),gas:n?(0,h.decimalToHex)(21e3):e.gas,value:e.value};return n&&(a.to=a.from,a.data="0x"),a}));return await(0,R.submitRequestToBackground)("approveTransactionsWithSameNonce",[a])}}).call(this)}).call(this,e("buffer").Buffer)}}},{package:"$root$",file:"ui/store/actions.ts"}],[7387,{pify:4934},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.generateActionId=n.callBackgroundMethod=void 0,n.setBackgroundConnection=async function(e){o=e,s=(0,r.default)(o)},n.submitRequestToBackground=function(e,t){var n;return null===(n=s)||void 0===n?void 0:n[e](...t??[])};var a,r=(a=e("pify"))&&a.__esModule?a:{default:a};let o=null,s=null;n.generateActionId=()=>Date.now()+Math.random();n.callBackgroundMethod=(e,t,n)=>{var a;null===(a=o)||void 0===a||a[e](...t,n)}}}},{package:"$root$",file:"ui/store/background-connection.ts"}],[92,{"../../../../shared/lib/transaction-breakdown-utils":5705,"../../../../shared/lib/transactions-controller-utils":5706,"../../../../ui/ducks/bridge/utils":6667,"../../../../ui/selectors":7370},function(){with(this.scopeTerminator)with(this.globalThis)return function(){"use strict";return function(e,t,n){Object.defineProperty(n,"__esModule",{value:!0}),n.getTokenUsdValue=n.getHexGasTotalUsd=void 0;var a=e("../../../../shared/lib/transaction-breakdown-utils"),r=e("../../../../shared/lib/transactions-controller-utils"),o=e("../../../../ui/ducks/bridge/utils"),s=e("../../../../ui/selectors");n.getHexGasTotalUsd=({bridgeHistoryItem:e,state:t})=>{const n=t.metamask.transactions.find((t=>t.id===e.txMetaId));if(!n)return null;const o=(0,a.calcHexGasTotal)(n),i=(0,s.getUSDConversionRateByChainId)(n.chainId)(t);return(0,r.calcTokenAmount)(o,18).toNumber()*i};n.getTokenUsdValue=async({chainId:e,tokenAmount:t,tokenAddress:n,state:a})=>{const r=(0,s.getMarketData)(a),i=(0,o.exchangeRateFromMarketData)(e,n,r);if(i){return t*i*(0,s.getUSDConversionRateByChainId)(e)(a)}const c=await(0,o.getTokenExchangeRate)({chainId:e,tokenAddress:n,currency:"usd"});return c?t*c:null}}}},{package:"$root$",file:"app/scripts/lib/bridge-status/metrics-utils.ts"}]],[],{});